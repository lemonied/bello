"use strict";(self.webpackChunkbello=self.webpackChunkbello||[]).push([[625],{2625:function(we,ne,c){c.d(ne,{iP:function(){return g},HK:function(){return oe},_Q:function(){return I},Ix:function(){return Be}});var re=c(97857),x=c.n(re),ue=c(13769),M=c.n(ue),i=c(67294),S=c(93247);function O(o){return typeof o=="undefined"||o===null||o===""||Array.isArray(o)&&o.length===0}var l=c(85893),ae=["children"],V=(0,i.createContext)(null),oe=function(t){var e=t.children,n=M()(t,ae),r=(0,i.useContext)(V),u=(0,i.useMemo)(function(){return Object.assign({},r,n)},[n,r]);return(0,l.jsx)(V.Provider,{value:u,children:e})},ie=c(9783),R=c.n(ie),P=function(o){return o.REMOVE="REMOVE",o.ADD="ADD",o.MODIFY="MODIFY",o.EMPTY="EMPTY",o}({}),I=function(o){return o.SOURCE="_DIFF_FORM_TYPE_SOURCE_",o.TARGET="_DIFF_FORM_TYPE_TARGET_",o}({}),Q={"zh-cn":{ADD:"\u65B0\u589E",REMOVE:"\u5220\u9664",MODIFY:"\u4FEE\u6539",EMPTY:"\u7A7A"},en:{ADD:"New",REMOVE:"Remove",MODIFY:"Modified",EMPTY:"Empty"}},se=R()(R()(R()(R()({},P.REMOVE,"#ff4d4f"),P.ADD,"#52c41a"),P.MODIFY,"#faad14"),P.EMPTY,"#d9d9d9"),q=(0,i.createContext)({}),b=function(t){var e=t.children,n=t.value,r=(0,i.useContext)(q),u=(0,i.useMemo)(function(){return Object.assign({},r,n)},[n,r]);return(0,l.jsx)(q.Provider,{value:u,children:e})},W=(0,i.createContext)({}),A=function(t){var e=t.children,n=t.value,r=(0,i.useContext)(W),u=(0,i.useMemo)(function(){return Object.assign({},r,n)},[n,r]);return(0,l.jsx)(W.Provider,{value:u,children:e})},fe=c(64599),le=c.n(fe),ve=c(19632),E=c.n(ve),ce=c(12444),de=c.n(ce),me=c(72004),he=c.n(me),F=c(96486),Z=function(){function o(){de()(this,o),R()(this,"state",{}),R()(this,"subscribers",[])}return he()(o,[{key:"setState",value:function(e){o.updateState(this.state,e)}},{key:"getSnapshots",value:function(){return this.state}},{key:"getSnapshot",value:function(e){var n=e.names,r=e.type;if(n&&r)return this.state[o.join([r].concat(E()(n)))]}},{key:"getUniqueFieldsSnapshots",value:function(e){var n=e.names,r=e.type,u=e.uniqueKey;if(n&&r&&u){var a=(0,F.pickBy)(this.state,function(s,f){return new RegExp("^".concat(o.join([o.join([r].concat(E()(n))),"\\d",o.join(u)]),"$")).test(f)});return(0,F.isEmpty)(a)?void 0:a}}},{key:"getChildSnapshots",value:function(e){var n=e.names,r=e.type;if(n&&r){var u=o.join([r].concat(E()(n))),a=(0,F.pickBy)(this.state,function(s,f){return f.startsWith(u)});return(0,F.isEmpty)(a)?void 0:a}}},{key:"emit",value:function(e){var n=o.join([e.type].concat(E()(e.names)));this.setState(e);var r=le()(this.subscribers),u;try{for(r.s();!(u=r.n()).done;){var a=u.value;(a.fuzzy&&n.startsWith(a.key)||a.uniqueKey&&new RegExp("^".concat(o.join([(0,F.escapeRegExp)(a.key),"\\d",(0,F.escapeRegExp)(o.join(a.uniqueKey))]),"$")).test(n)||n===a.key)&&a.callback(e)}}catch(s){r.e(s)}finally{r.f()}}},{key:"on",value:function(e,n){var r=this,u=o.join([n.type].concat(E()(n.names))),a=x()(x()({},n),{},{key:u,callback:e});return this.subscribers.push(a),function(){var s=r.subscribers.indexOf(a);s>-1&&r.subscribers.splice(s,1)}}}],[{key:"join",value:function(e){return e.join(o.keySplit)}},{key:"updateState",value:function(e,n){var r=o.join([n.type].concat(E()(n.names)));return n.remove?delete e[r]:e[r]=n,e}}]),o}();R()(Z,"keySplit","_DIFF_FORM_STORE_KEY_SPLIT_");var p=function(){return(0,i.useContext)(q)},z=function(){var t=p(),e=t.type;return e===I.SOURCE?I.TARGET:I.SOURCE},xe=function(t){var e=(0,i.useRef)(t);return e.current=t,(0,i.useCallback)(function(){return e.current.apply(e,arguments)},[])},ye=function(t){var e=(0,i.useRef)(),n=(0,i.useRef)(t);return n.current!==t&&(e.current=n.current,n.current=t),e.current},G=function(t,e){var n=(0,i.useRef)(),r=ye(e);return(typeof e=="undefined"||!(0,F.isEqual)(r,e))&&(n.current=t()),n.current},H=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],u=e.slice(1),a=xe(r);return G(function(){return F.debounce.apply(void 0,[a].concat(E()(u)))},[u])},Fe=c(5574),Y=c.n(Fe),k=function(){var t=p(),e=t.statusInfo,n=t.firstStatus,r=(0,i.useState)(!1),u=Y()(r,2),a=u[0],s=u[1];(0,i.useEffect)(function(){var v=setTimeout(function(){return s(!0)},350);return function(){return clearTimeout(v)}},[]);var f=(0,i.useMemo)(function(){return n?e:void 0},[n,e]);return a?f:void 0},pe=c(91269),U=function(){return(0,i.useContext)(V)},De=function(){var t,e,n=(0,i.useContext)(pe.ZP.ConfigContext),r=U(),u=(t=(e=n.locale)===null||e===void 0?void 0:e.locale)!==null&&t!==void 0?t:"en";return(0,i.useCallback)(function(a){var s,f,v=r==null?void 0:r.locale,m=(s=Q[u])!==null&&s!==void 0?s:Q.en,d=Object.assign({},m,v);return(f=d[a])!==null&&f!==void 0?f:a},[u,r==null?void 0:r.locale])},J=function(){var t=De(),e=U();return(0,i.useCallback)(function(n){if(n){var r,u;return{code:n,text:t(n),color:(r=e==null||(u=e.color)===null||u===void 0?void 0:u[n])!==null&&r!==void 0?r:se[n]}}},[e==null?void 0:e.color,t])},L=function(){return(0,i.useContext)(W)},$=function(t){return G(function(){if(typeof t!="undefined")return Array.isArray(t)?t.length?t:void 0:[t]},[t])},K=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return G(function(){if(!e.some(function(u){return typeof u=="undefined"})){var r=F.concat.apply(void 0,e);return r.length?r:void 0}},[e])},Ce=function(t){var e=$(t),n=p(),r=n.fullNamePath;return K(r,e)},X=function(t){var e=$(t),n=p(),r=n.anotherFieldName,u=n.uniqueKey;return(0,i.useMemo)(function(){return u&&typeof r=="number"&&typeof(e==null?void 0:e[0])=="number"?[r].concat(E()(e.slice(1))):e},[r,e,u])},B=function(t,e){var n=p(),r=n.store,u=(0,i.useState)(function(){return r==null?void 0:r.getSnapshot({type:t,names:e})}),a=Y()(u,2),s=a[0],f=a[1],v=(0,i.useRef)(s),m=H(function(){f(v.current)},300);return(0,i.useEffect)(function(){if(e&&t&&r){v.current=r.getSnapshot({type:t,names:e}),m(),m.flush();var d=r.on(function(h){var y=v.current;v.current=h.remove?void 0:h,m(),y!==v.current&&((0,F.isUndefined)(y)||(0,F.isUndefined)(v.current))&&m.flush()},{names:e,type:t});return function(){d(),m.cancel()}}},[t,e,r,m]),s},_e=function(t){var e=useDiffFormContext(),n=e.type,r=useNextNames(t);return B(n,r)},Se=function(t){var e=p(),n=e.anotherFullNamePath,r=z(),u=X(t),a=K(n,u);return B(r,a)},ge=function(t){var e=p(),n=e.type,r=e.fullNamePath,u=e.uniqueKey,a=K(r,t,u);return B(n,a)},Pe=function(){var t=p(),e=t.store,n=t.anotherFullNamePath,r=t.uniqueKey,u=z(),a=(0,i.useState)(function(){return e==null?void 0:e.getUniqueFieldsSnapshots({names:n,type:u,uniqueKey:r})}),s=Y()(a,2),f=s[0],v=s[1],m=(0,i.useRef)(f),d=H(function(){v(m.current)},300);return(0,i.useEffect)(function(){if(n&&u&&e&&r){m.current=e.getUniqueFieldsSnapshots({names:n,type:u,uniqueKey:r}),d(),d.flush();var h=e.on(function(y){var C=m.current;m.current=C?Z.updateState(x()({},C),y):e==null?void 0:e.getUniqueFieldsSnapshots({names:n,type:u,uniqueKey:r}),d(),(0,F.values)(C).length!==(0,F.values)(m.current).length&&d.flush()},{names:n,type:u,uniqueKey:r});return function(){h(),d.cancel()}}},[n,d,e,u,r]),f},Ie=function(t){var e=p(),n=e.store,r=e.anotherFullNamePath,u=K(r,t),a=z(),s=(0,i.useRef)((0,i.useMemo)(function(){return n==null?void 0:n.getChildSnapshots({names:u,type:a})},[])),f=(0,i.useState)(!(0,F.isEmpty)(s.current)),v=Y()(f,2),m=v[0],d=v[1],h=H(function(){d(!!s.current)},300);return(0,i.useEffect)(function(){if(u&&a&&n){s.current=n.getChildSnapshots({type:a,names:u}),h(),h.flush();var y=n.on(function(C){var j=s.current;s.current=j?Z.updateState(x()({},j),C):n==null?void 0:n.getChildSnapshots({names:u,type:a}),h(),(0,F.values)(j).length!==(0,F.values)(s.current).length&&h.flush()},{names:u,type:a,fuzzy:!0});return function(){y(),h.cancel()}}},[a,u,n,h]),m},je=function(t){var e=p(),n=e.uniqueKey,r=e.anotherFullNamePath,u=Pe(),a=ge(t),s=Ie(t);return(0,i.useMemo)(function(){if(n&&u&&a&&r){var f;return(f=(0,F.values)(u).find(function(v){return(0,F.isEqual)(v.value,a.value)}))===null||f===void 0?void 0:f.names[r.length]}return s?t:void 0},[n,u,a,r,s,t])},Ne=c(68400),Ee=c.n(Ne),Me=c(97653),Re=c(93967),Ae=c.n(Re),w,Oe=Me.ZP.div(w||(w=Ee()([`
  &.diff-form-mark{
    padding: 8px;
    border-style: dashed;
    border-top: none;
    border-left-width: 1px;
    border-bottom-width: 1px;
    border-right-width: 1px;
    border-color: `,`;
    position: relative;

    .diff-form-mark-divider{
      position: absolute;
      bottom: 100%;
      width: 100%;
      left: 0;
      transform: translate(0, 50%);
      display: flex;
      align-items: center;

      & > span{
        font-size: 12px;
        color: `,`;

        &:first-child{
          flex: 0 0 25%;
        }

        &:last-child {
          flex: 1;
        }

        &:first-child, &:last-child{
          border-top-width: 1px;
          border-top-style: dashed;
          border-color: `,`;
        }
      }
    }
  }
`])),function(o){var t;return(t=o.$status)===null||t===void 0?void 0:t.color},function(o){var t;return(t=o.$status)===null||t===void 0?void 0:t.color},function(o){var t;return(t=o.$status)===null||t===void 0?void 0:t.color}),_=function(t){var e=t.className,n=t.style,r=t.children,u=k();return(0,l.jsxs)(Oe,{className:Ae()(e,{"diff-form-mark":u}),style:n,$status:u,children:[u?(0,l.jsxs)("div",{className:"diff-form-mark-divider",children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{children:u==null?void 0:u.text}),(0,l.jsx)("span",{})]}):null,r]})},be=["children","name","noStatus"],Ke=["children","noStatus"],Te=function(t){var e=t.children,n=t.name,r=t.noStatus,u=M()(t,be),a=p(),s=a.type,f=a.store,v=a.statusInfo,m=a.firstStatus,d=U(),h=Se(n),y=J(),C=Ce(n),j=(0,i.useRef)(f);j.current=f;var N=(0,i.useMemo)(function(){if(s){var D=u.value,T=h==null?void 0:h.value,Xe=function(){if(O(D)&&!O(T))return s===I.SOURCE?P.EMPTY:P.REMOVE;if(!O(D)&&O(T))return s===I.SOURCE?P.REMOVE:P.ADD;if(!O(D)&&!O(T)&&!(0,F.isEqual)(D,T))return P.MODIFY}();return y(Xe)}},[h==null?void 0:h.value,u.value,s,y]),Qe=(0,i.useMemo)(function(){return{statusInfo:N!=null?N:v,firstStatus:!m&&!v&&!!N}},[m,N,v]),Je=(0,i.useMemo)(function(){var D;return(D=d==null?void 0:d.wrapper)!==null&&D!==void 0?D:_},[d==null?void 0:d.wrapper]);return(0,i.useEffect)(function(){if(C&&s){var D,T=u.value;(D=j.current)===null||D===void 0||D.emit({type:s,names:C,value:T})}},[u.value,C,s]),(0,i.useEffect)(function(){if(s&&C)return function(){var D;return(D=j.current)===null||D===void 0?void 0:D.emit({type:s,names:C,remove:!0})}},[C,s]),(0,l.jsx)(b,{value:Qe,children:r?(0,i.cloneElement)(e,u):(0,l.jsx)(Je,{children:(0,i.cloneElement)(e,u)})})},ee=function(t){var e=t.children,n=t.noStatus,r=M()(t,Ke),u=p(),a=$(t.name);return typeof u.type!="undefined"&&a&&(0,i.isValidElement)(e)?(0,l.jsx)(S.Z.Item,x()(x()({},r),{},{children:(0,l.jsx)(Te,{name:r.name,noStatus:r.noStyle||n,children:e})})):(0,l.jsx)(S.Z.Item,x()(x()({},r),{},{children:e}))};ee.useStatus=S.Z.Item.useStatus;var Ue=["uniqueKey"],Le=["uniqueKey"],Ze=function(t){var e=t.uniqueKey,n=M()(t,Ue),r=p(),u=r.anotherFullNamePath,a=L(),s=a.namePaths,f=X(n.name),v=K(u,f),m=$(e),d=(0,i.useMemo)(function(){return{fullNamePath:s,anotherFullNamePath:v,uniqueKey:m}},[s,v,m]);return(0,l.jsx)(b,{value:d,children:(0,l.jsx)(S.Z.List,x()({},n))})},Ye=function(t){var e=t.uniqueKey,n=M()(t,Le),r=p(),u=L(),a=u.namePaths,s=K(a,t.name),f=(0,i.useMemo)(function(){return{namePaths:s}},[s]);return typeof r.type!="undefined"?(0,l.jsx)(A,{value:f,children:(0,l.jsx)(Ze,x()(x()({},n),{},{uniqueKey:e}))}):(0,l.jsx)(A,{value:f,children:(0,l.jsx)(S.Z.List,x()({},n))})},$e=function(t){var e=t.children,n=t.noStatus,r=L(),u=r.fieldName,a=je(u),s=p(),f=s.statusInfo,v=s.type,m=s.firstStatus,d=J(),h=U(),y=(0,i.useMemo)(function(){if(f)return f;if(typeof a!="number")return v===I.SOURCE?d(P.REMOVE):d(P.ADD)},[a,f,v,d]),C=(0,i.useMemo)(function(){return{fieldName:u,anotherFieldName:a,statusInfo:y,firstStatus:!m&&!f&&!!y}},[u,m,a,y,f]),j=(0,i.useMemo)(function(){var N;return(N=h==null?void 0:h.wrapper)!==null&&N!==void 0?N:_},[h==null?void 0:h.wrapper]);return(0,l.jsx)(b,{value:C,children:n?e:(0,l.jsx)(j,{children:e})})},Ve=function(t){var e=p(),n=(0,i.useMemo)(function(){return{fieldName:t.fieldName}},[t.fieldName]);return typeof e.type!="undefined"?(0,l.jsx)(A,{value:n,children:(0,l.jsx)($e,x()({},t))}):(0,l.jsx)(A,{value:n,children:t.children})},qe=function(t){var e=t.children,n=L();return e(n)},We=c(71230),te=c(15746),ze=function(t){var e=t.source,n=t.target;return(0,l.jsxs)(We.Z,{gutter:[8,8],children:[(0,l.jsx)(te.Z,{span:24,lg:12,children:e}),(0,l.jsx)(te.Z,{span:24,lg:12,children:n})]})},Ge=function(t){var e=t.children,n=k();return e(n)},He=["diff"],g=function(t){var e=t.diff,n=M()(t,He),r=U(),u=(0,i.useMemo)(function(){var y={layout:n.layout,component:n.component,name:"source"};if(e===!0)return y;if(e)return x()(x()({},y),e)},[e,n.layout,n.component]),a=(0,i.useMemo)(function(){return x()({name:u?"target":void 0},n)},[n,u]),s=(0,i.useMemo)(function(){return{store:new Z,fullNamePath:[],anotherFullNamePath:[]}},[]),f=(0,i.useMemo)(function(){return{type:I.SOURCE}},[]),v=(0,i.useMemo)(function(){return{type:I.TARGET}},[]),m=(0,i.useMemo)(function(){return{type:f.type,name:u==null?void 0:u.name,disabled:u==null?void 0:u.disabled,namePaths:[]}},[u==null?void 0:u.disabled,u==null?void 0:u.name,f.type]),d=(0,i.useMemo)(function(){return{type:v.type,name:a==null?void 0:a.name,disabled:a==null?void 0:a.disabled,namePaths:[]}},[a==null?void 0:a.disabled,a==null?void 0:a.name,v.type]),h=(0,i.useMemo)(function(){var y;return(y=r==null?void 0:r.component)!==null&&y!==void 0?y:ze},[r==null?void 0:r.component]);return u?(0,l.jsx)(b,{value:s,children:(0,l.jsx)(h,{source:(0,l.jsx)(A,{value:m,children:(0,l.jsx)(b,{value:f,children:(0,l.jsx)(S.Z,x()(x()({},u),{},{children:a.children}))})}),target:(0,l.jsx)(A,{value:d,children:(0,l.jsx)(b,{value:v,children:(0,l.jsx)(S.Z,x()({},a))})})})}):(0,l.jsx)(A,{value:d,children:(0,l.jsx)(S.Z,x()({},a))})};g.Item=ee,g.List=Ye,g.ListItem=Ve,g.ErrorList=S.Z.ErrorList,g.Info=qe,g.DiffStatus=Ge,g.useForm=S.Z.useForm,g.useFormInstance=S.Z.useFormInstance,g.useWatch=S.Z.useWatch,g.useDiffFormInfo=L,g.useDiffFormStatus=k;var ke=["children"],Be=function(t){var e=t.children,n=M()(t,ke);return e(n)}}}]);
