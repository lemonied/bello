(self.webpackChunkbello=self.webpackChunkbello||[]).push([[81],{89749:function(B,E,l){"use strict";l.d(E,{y:function(){return N}});var S=l(97857),v=l.n(S),K=l(13769),M=l.n(K),i=l(67294),F=l(71230),T=l(15746),y=l(48413),C=l(96486),I={REMOVE:{code:"REMOVE",color:"#ff4d4f"},ADD:{code:"ADD",color:"#52c41a"},MODIFY:{code:"MODIFY",color:"#faad14"},EMPTY:{code:"EMPTY",color:"#d9d9d9"}},j=function(o){return o.SOURCE="_DIFORM_TYPE_SOURCE_",o.TARGET="_DIFORM_TYPE_TARGET_",o}({});function U(o){return typeof o=="undefined"||o===null||o===""}function z(o,n){return U(o)&&U(n)?!0:(0,C.isEqual)(o,n)}var ae=function(n,e,t){if(U(n)&&!U(e))return t===j.SOURCE?I.EMPTY:I.REMOVE;if(!U(n)&&U(e))return t===j.SOURCE?I.REMOVE:I.ADD;if(!z(n,e))return I.MODIFY},d=l(85893),_=(0,i.createContext)({}),L=function(n){var e=n.children,t=n.value,r=(0,i.useContext)(_),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,d.jsx)(_.Provider,{value:u,children:e})},G=(0,i.createContext)({}),p=function(n){var e=n.children,t=n.value,r=(0,i.useContext)(G),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,d.jsx)(G.Provider,{value:u,children:e})},Be=l(84820),ie=l(96695),se=l.n(ie),le=l(19632),O=l.n(le),fe=l(12444),ve=l.n(fe),de=l(72004),ce=l.n(de),me=l(9783),H=l.n(me),Z=function(){function o(){ve()(this,o),H()(this,"state",{}),H()(this,"subscribers",[])}return ce()(o,[{key:"setState",value:function(e){o.updateState(this.state,e)}},{key:"getSnapshots",value:function(){return this.state}},{key:"getSnapshot",value:function(e){var t=e.names,r=e.type;if(t&&r)return this.state[[r].concat(O()(t)).join(o.keySplit)]}},{key:"getUniqueFieldsSnapshots",value:function(e){var t=e.names,r=e.type,u=e.uniqueKey;if(t&&r&&u)return(0,C.pickBy)(this.state,function(s,a){return new RegExp("^".concat(o.join([o.join([r].concat(O()(t))),"\\d",o.join(u)]),"$")).test(a)})}},{key:"getChildSnapshots",value:function(e){var t=e.names,r=e.type;if(t&&r){var u=o.join([r].concat(O()(t)));return(0,C.pickBy)(this.state,function(s,a){return a.startsWith(u)})}}},{key:"emit",value:function(e){var t=o.join([e.type].concat(O()(e.names))),r=this.state[t];this.setState(e);var u=se()(this.subscribers),s;try{for(u.s();!(s=u.n()).done;){var a=s.value;a.onlyValue&&!e.remove&&r&&z(e.value,r.value)||(a.fuzzy&&t.startsWith(a.key)||a.uniqueKey&&new RegExp("^".concat(o.join([(0,C.escapeRegExp)(a.key),"\\d",(0,C.escapeRegExp)(o.join(a.uniqueKey))]),"$")).test(t)||t===a.key)&&a.callback(e)}}catch(f){u.e(f)}finally{u.f()}}},{key:"on",value:function(e,t){var r=this,u=[t.type].concat(O()(t.names)).join(o.keySplit),s=v()(v()({},t),{},{key:u,callback:e});return this.subscribers.push(s),function(){var a=r.subscribers.indexOf(s);a>-1&&r.subscribers.splice(a,1)}}}],[{key:"join",value:function(e){return e.join(o.keySplit)}},{key:"updateState",value:function(e,t){var r=[t.type].concat(O()(t.names)).join(o.keySplit);return t.remove?delete e[r]:e[r]=t,e}}]),o}();H()(Z,"keySplit","_DIFORM_STORE_KEY_SPLIT_");var x=function(){return(0,i.useContext)(_)},J=function(){var n=x(),e=n.type;return e===j.SOURCE?j.TARGET:j.SOURCE},he=function(n){var e=(0,i.useRef)(n);return e.current=n,(0,i.useCallback)(function(){return e.current.apply(e,arguments)},[])},xe=function(n){var e=(0,i.useRef)(),t=(0,i.useRef)(n);return t.current!==n&&(e.current=t.current,t.current=n),e.current},Q=function(n,e){var t=(0,i.useRef)(),r=xe(e);return(typeof e=="undefined"||!(0,C.isEqual)(r,e))&&(t.current=n()),t.current},X=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=e[0],u=e.slice(1),s=he(r);return Q(function(){return C.debounce.apply(void 0,[s].concat(O()(u)))},[u])},ye=l(91269),Ce=l(98030),w={"zh-cn":{ADD:"\u65B0\u589E",REMOVE:"\u5220\u9664",MODIFY:"\u4FEE\u6539",EMPTY:"\u7A7A"},en:{ADD:"New",REMOVE:"Remove",MODIFY:"Modified",EMPTY:"Empty"}},ee=function(){return(0,i.useContext)(Ce.B)},De=function(){var n,e,t=(0,i.useContext)(ye.ZP.ConfigContext),r=ee(),u=(n=(e=t.locale)===null||e===void 0?void 0:e.locale)!==null&&n!==void 0?n:"en";return(0,i.useCallback)(function(s){var a,f,m=r==null?void 0:r.locale,h=(a=w[u])!==null&&a!==void 0?a:w.en,c=Object.assign({},h,m);return(f=c[s])!==null&&f!==void 0?f:s},[u,r==null?void 0:r.locale])},te=function(){var n=De(),e=ee();return(0,i.useCallback)(function(t){if(t){var r,u;return v()(v()({},t),{},{text:n(t.code),color:(r=e==null||(u=e.color)===null||u===void 0?void 0:u[t.code])!==null&&r!==void 0?r:t.color})}},[e==null?void 0:e.color,n])},V=function(){return(0,i.useContext)(G)},Y=function(n){return Q(function(){if(typeof n!="undefined")return Array.isArray(n)?n.length?n:void 0:[n]},[n])},Pe=l(5574),$=l.n(Pe),b=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Q(function(){if(!e.some(function(u){return typeof u=="undefined"})){var r=C.concat.apply(void 0,e);return r.length?r:void 0}},[e])},Ee=function(n){var e=Y(n),t=x(),r=t.fullNamePath;return b(r,e)},ne=function(n){var e=Y(n),t=x(),r=t.anotherFieldName,u=t.uniqueKey;return(0,i.useMemo)(function(){return u&&typeof r=="number"&&typeof(e==null?void 0:e[0])=="number"?[r].concat(O()(e.slice(1))):e},[r,e,u])},q=function(n,e){var t=x(),r=t.store,u=(0,i.useState)(function(){return r==null?void 0:r.getSnapshot({type:n,names:e})}),s=$()(u,2),a=s[0],f=s[1],m=X(function(h){f(h)},300);return(0,i.useEffect)(function(){if(e&&n&&r){m(r.getSnapshot({type:n,names:e}));var h=r.on(function(c){m(c.remove?void 0:c)},{names:e,type:n,onlyValue:!0});return function(){h(),m.cancel()}}},[n,e,r,m]),a},Ze=function(n){var e=useDiformContext(),t=e.type,r=useNextNames(n);return q(t,r)},Se=function(n){var e=x(),t=e.anotherFullNamePath,r=J(),u=ne(n),s=b(t,u);return q(r,s)},Me=function(n){var e=x(),t=e.type,r=e.fullNamePath,u=e.uniqueKey,s=b(r,n,u);return q(t,s)},je=function(){var n=x(),e=n.store,t=n.anotherFullNamePath,r=n.uniqueKey,u=J(),s=(0,i.useState)(function(){return e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r})}),a=$()(s,2),f=a[0],m=a[1],h=(0,i.useRef)(f),c=X(function(){m(h.current)},300);return(0,i.useEffect)(function(){if(t&&u&&e&&r){h.current=e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),c();var P=e.on(function(D){h.current=h.current?Z.updateState(v()({},h.current),D):e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),c()},{names:t,type:u,uniqueKey:r,onlyValue:!0});return function(){P(),c.cancel()}}},[t,c,e,u,r]),f},Ie=function(n){var e=x(),t=e.store,r=e.anotherFullNamePath,u=b(r,n),s=J(),a=(0,i.useRef)((0,i.useMemo)(function(){return t==null?void 0:t.getChildSnapshots({names:u,type:s})},[])),f=(0,i.useState)(!(0,C.isEmpty)(a.current)),m=$()(f,2),h=m[0],c=m[1],P=X(function(){c(!(0,C.isEmpty)(a.current))},300);return(0,i.useEffect)(function(){if(u&&s&&t){a.current=t.getChildSnapshots({type:s,names:u}),P();var D=t.on(function(R){a.current=a.current?Z.updateState(v()({},a.current),R):t==null?void 0:t.getChildSnapshots({names:u,type:s}),P()},{names:u,type:s,onlyValue:!0,fuzzy:!0});return function(){D(),P.cancel()}}},[s,u,t,P]),h},Ne=function(n){var e=x(),t=e.uniqueKey,r=e.anotherFullNamePath,u=je(),s=Me(n),a=Ie(n);return(0,i.useMemo)(function(){if(t&&u&&s&&r){var f;return(f=(0,C.values)(u).find(function(m){return z(m.value,s.value)}))===null||f===void 0?void 0:f.names[r.length]}return a?n:void 0},[t,u,s,r,a,n])},ge=l(93967),Oe=l.n(ge),re=function(n){var e=n.className,t=n.style,r=n.children,u=x(),s=u.statusInfo,a=u.firstStatus,f=a?s:null;return(0,d.jsxs)("div",{className:Oe()(e,{"bello-diform-mark":f}),style:v()({borderColor:f==null?void 0:f.color},t),children:[f?(0,d.jsxs)("div",{className:"bello-diform-mark-divider",children:[(0,d.jsx)("span",{style:{borderColor:f.color}}),(0,d.jsx)("span",{style:{color:f.color},children:s==null?void 0:s.text}),(0,d.jsx)("span",{style:{borderColor:f.color}})]}):null,r]})},Re=["children","name","noStatus"],Fe=["children","noStatus"],pe=function(n){var e=n.children,t=n.name,r=n.noStatus,u=M()(n,Re),s=x(),a=s.type,f=s.store,m=s.statusInfo,h=s.firstStatus,c=Se(t),P=te(),D=Ee(t),R=(0,i.useRef)(f);R.current=f;var A=(0,i.useMemo)(function(){if(a){var g=u.value,k=c==null?void 0:c.value;return P(ae(g,k,a))}},[c==null?void 0:c.value,u.value,a,P]),W=(0,i.useMemo)(function(){return{statusInfo:A!=null?A:m,firstStatus:!h&&!m&&!!A}},[h,A,m]),oe=(0,i.useMemo)(function(){return v()(v()({},u),{},{diffstatus:W.firstStatus?W.statusInfo:void 0})},[u,W.statusInfo,W.firstStatus]);return(0,i.useEffect)(function(){if(D&&a){var g,k=u.value;(g=R.current)===null||g===void 0||g.emit({type:a,names:D,value:k,statusInfo:A})}},[u.value,D,A,a]),(0,i.useEffect)(function(){if(a&&D)return function(){var g;return(g=R.current)===null||g===void 0?void 0:g.emit({type:a,names:D,remove:!0})}},[D,a]),(0,d.jsx)(L,{value:W,children:r?(0,i.cloneElement)(e,oe):(0,d.jsx)(re,{children:(0,i.cloneElement)(e,oe)})})},ue=function(n){var e=n.children,t=n.noStatus,r=M()(n,Fe),u=x(),s=Y(n.name);return typeof u.type!="undefined"&&s&&(0,i.isValidElement)(e)?(0,d.jsx)(y.Z.Item,v()(v()({},r),{},{children:(0,d.jsx)(pe,{name:r.name,noStatus:r.noStyle||t,children:e})})):(0,d.jsx)(y.Z.Item,v()(v()({},r),{},{children:e}))};ue.useStatus=y.Z.Item.useStatus;var Ae=["uniqueKey"],Ke=["uniqueKey"],Te=function(n){var e=n.uniqueKey,t=M()(n,Ae),r=x(),u=r.anotherFullNamePath,s=V(),a=s.namePaths,f=ne(t.name),m=b(u,f),h=Y(e),c=(0,i.useMemo)(function(){return{fullNamePath:a,anotherFullNamePath:m,uniqueKey:h}},[a,m,h]);return(0,d.jsx)(L,{value:c,children:(0,d.jsx)(y.Z.List,v()({},t))})},Ue=function(n){var e=n.uniqueKey,t=M()(n,Ke),r=x(),u=V(),s=u.namePaths,a=b(s,n.name),f=(0,i.useMemo)(function(){return{namePaths:a}},[a]);return typeof r.type!="undefined"?(0,d.jsx)(p,{value:f,children:(0,d.jsx)(Te,v()(v()({},t),{},{uniqueKey:e}))}):(0,d.jsx)(p,{value:f,children:(0,d.jsx)(y.Z.List,v()({},t))})},Le=function(n){var e=n.children,t=n.noStatus,r=V(),u=r.fieldName,s=Ne(u),a=x(),f=a.statusInfo,m=a.type,h=a.firstStatus,c=te(),P=(0,i.useMemo)(function(){if(f)return f;if(typeof s!="number")return m===j.SOURCE?c(I.REMOVE):c(I.ADD)},[s,f,m,c]),D=(0,i.useMemo)(function(){return{fieldName:u,anotherFieldName:s,statusInfo:P,firstStatus:!h&&!f&&!!P}},[u,h,s,P,f]),R=(0,i.useMemo)(function(){return(0,i.isValidElement)(e)?(0,i.cloneElement)(e,{diffstatus:D.statusInfo}):e},[e,D.statusInfo]);return(0,d.jsx)(L,{value:D,children:t?R:(0,d.jsx)(re,{children:R})})},be=function(n){var e=x(),t=(0,i.useMemo)(function(){return{fieldName:n.fieldName}},[n.fieldName]);return typeof e.type!="undefined"?(0,d.jsx)(p,{value:t,children:(0,d.jsx)(Le,v()({},n))}):(0,d.jsx)(p,{value:t,children:n.children})},We=["diff"],N=function(n){var e=n.diff,t=M()(n,We),r=(0,i.useMemo)(function(){var c={layout:t.layout,name:"source"};if(e===!0)return c;if(e)return v()(v()({},c),e)},[e,t.layout]),u=(0,i.useMemo)(function(){return v()({name:r?"target":void 0},t)},[t,r]),s=(0,i.useMemo)(function(){return{store:new Z,fullNamePath:[],anotherFullNamePath:[]}},[]),a=(0,i.useMemo)(function(){return{type:j.SOURCE}},[]),f=(0,i.useMemo)(function(){return{type:j.TARGET}},[]),m=(0,i.useMemo)(function(){return{name:r==null?void 0:r.name,disabled:r==null?void 0:r.disabled,namePaths:[]}},[r==null?void 0:r.disabled,r==null?void 0:r.name]),h=(0,i.useMemo)(function(){return{name:u==null?void 0:u.name,disabled:u==null?void 0:u.disabled,namePaths:[]}},[u==null?void 0:u.disabled,u==null?void 0:u.name]);return r?(0,d.jsx)(L,{value:s,children:(0,d.jsxs)(F.Z,{gutter:8,children:[(0,d.jsx)(T.Z,{span:12,children:(0,d.jsx)(p,{value:m,children:(0,d.jsx)(L,{value:a,children:(0,d.jsx)(y.Z,v()(v()({},r),{},{children:u.children}))})})}),(0,d.jsx)(T.Z,{span:12,children:(0,d.jsx)(p,{value:h,children:(0,d.jsx)(L,{value:f,children:(0,d.jsx)(y.Z,v()({},u))})})})]})}):(0,d.jsx)(p,{value:h,children:(0,d.jsx)(y.Z,v()({},u))})};N.Item=ue,N.List=Ue,N.ListItem=be,N.ErrorList=y.Z.ErrorList,N.useForm=y.Z.useForm,N.useFormInstance=y.Z.useFormInstance,N.useWatch=y.Z.useWatch,N.useDiformInfo=V},7481:function(B,E,l){"use strict";l.d(E,{Diform:function(){return S.y},DiformConfigProvider:function(){return M.z}});var S=l(89749),v=l(84820),K=l.n(v);l.o(v,"DiformConfigProvider")&&l.d(E,{DiformConfigProvider:function(){return v.DiformConfigProvider}}),l.o(v,"PassProps")&&l.d(E,{PassProps:function(){return v.PassProps}});var M=l(98030)},98030:function(B,E,l){"use strict";l.d(E,{B:function(){return F},z:function(){return T}});var S=l(13769),v=l.n(S),K=l(67294),M=l(85893),i=["children"],F=(0,K.createContext)(null),T=function(C){var I=C.children,j=v()(C,i);return(0,M.jsx)(F.Provider,{value:j,children:I})}},84820:function(){},63170:function(B,E,l){"use strict";l.d(E,{I:function(){return M}});var S=l(13769),v=l.n(S),K=["children"],M=function(F){var T=F.children,y=v()(F,K);return T(y)}},31081:function(B,E,l){"use strict";l.d(E,{Diform:function(){return S.Diform},DiformConfigProvider:function(){return S.DiformConfigProvider},PassProps:function(){return v.I}});var S=l(7481);l.o(S,"PassProps")&&l.d(E,{PassProps:function(){return S.PassProps}});var v=l(63170)}}]);
