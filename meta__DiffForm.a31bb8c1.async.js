"use strict";(self.webpackChunkbello=self.webpackChunkbello||[]).push([[83],{32979:function(u,o,n){var r;n.r(o),n.d(o,{demos:function(){return C}});var v=n(15009),d=n.n(v),x=n(99289),s=n.n(x),a=n(67294),h=n(10025),p=n(2625),I=n(24061),D=n(22383),F=n(67247),y=n(75072),C={"src-diff-form-demo-dynamicdiff":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,7173))})),asset:{type:"BLOCK",id:"src-diff-form-demo-dynamicdiff",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(71340).Z},react:{type:"NPM",value:"18.3.1"},bello:{type:"NPM",value:"1.0.5"},antd:{type:"NPM",value:"5.23.2"},"@ant-design/icons":{type:"NPM",value:"5.6.0"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),bello:p,antd:I,"@ant-design/icons":D},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}},"src-diff-form-demo-tablist":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,12253))})),asset:{type:"BLOCK",id:"src-diff-form-demo-tablist",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(40727).Z},react:{type:"NPM",value:"18.3.1"},bello:{type:"NPM",value:"1.0.5"},antd:{type:"NPM",value:"5.23.2"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),bello:p,antd:I},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}},"src-diff-form-demo-defaulti18n":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,87590))})),asset:{type:"BLOCK",id:"src-diff-form-demo-defaulti18n",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(9658).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"5.23.2"},bello:{type:"NPM",value:"1.0.5"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),antd:I,"antd/locale/zh_CN":F,"antd/locale/en_US":y,bello:p},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}},"src-diff-form-demo-customi18n":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,88697))})),asset:{type:"BLOCK",id:"src-diff-form-demo-customi18n",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(57302).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"5.23.2"},bello:{type:"NPM",value:"1.0.5"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),antd:I,bello:p},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}},"src-diff-form-demo-customcolor":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,70047))})),asset:{type:"BLOCK",id:"src-diff-form-demo-customcolor",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(93706).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"5.23.2"},bello:{type:"NPM",value:"1.0.5"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),antd:I,bello:p},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}},"src-diff-form-demo-customdiff":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,20103))})),asset:{type:"BLOCK",id:"src-diff-form-demo-customdiff",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(93876).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"5.23.2"},bello:{type:"NPM",value:"1.0.5"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),antd:I,bello:p},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}},"src-diff-form-demo-customwrapper":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,78420))})),asset:{type:"BLOCK",id:"src-diff-form-demo-customwrapper",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(4296).Z},react:{type:"NPM",value:"18.3.1"},bello:{type:"NPM",value:"1.0.5"},antd:{type:"NPM",value:"5.23.2"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),bello:p,antd:I},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}},"src-diff-form-demo-customcomponent":{component:a.memo(a.lazy(function(){return n.e(433).then(n.bind(n,35292))})),asset:{type:"BLOCK",id:"src-diff-form-demo-customcomponent",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(22394).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"5.23.2"},bello:{type:"NPM",value:"1.0.5"}},entry:"index.tsx"},context:{react:r||(r=n.t(a,2)),antd:I,bello:p},renderOpts:{compile:function(){var l=s()(d()().mark(function f(){var t,i=arguments;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(335).then(n.bind(n,37335));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,i));case 3:case"end":return e.stop()}},f)}));function m(){return l.apply(this,arguments)}return m}()}}}},93647:function(u,o,n){n.r(o),n.d(o,{texts:function(){return v}});var r=n(10025);const v=[{value:"\u67D0\u4E9B\u4E1A\u52A1\u573A\u666F\u4E0B\uFF0C\u9700\u8981\u5C06\u8868\u5355\u53D8\u66F4\u524D\u540E\u7684\u5DEE\u5F02\u66F4\u76F4\u89C2\u7684\u5C55\u793A\u51FA\u6765",paraId:0,tocIndex:0},{value:"\u4E8C\u6B21\u5F00\u53D1",paraId:1,tocIndex:1},{value:"antd Form",paraId:1,tocIndex:1},{value:"\uFF0C\u539FAPI\u4FDD\u6301\u4E0D\u53D8\uFF0C\u6700\u5C0F\u7684\u6539\u9020\u6210\u672C",paraId:1,tocIndex:1},{value:"\u8868\u5355\u4EE3\u7801\u53EA\u9700\u8981\u5199\u4E00\u6B21\uFF0C\u901A\u8FC7\u914D\u7F6E\u9879\u5F00\u542F/\u5173\u95EDDiff\u5DEE\u5F02\u5BF9\u6BD4\uFF0C\u6700\u5C0F\u7684\u5F00\u53D1\u6210\u672C",paraId:1,tocIndex:1},{value:"\u7EE7\u627F antd - ",paraId:2,tocIndex:13},{value:"Form",paraId:2,tocIndex:13},{value:"\u5C5E\u6027",paraId:3,tocIndex:13},{value:"\u8BF4\u660E",paraId:3,tocIndex:13},{value:"\u7C7B\u578B",paraId:3,tocIndex:13},{value:"\u9ED8\u8BA4\u503C",paraId:3,tocIndex:13},{value:"diff",paraId:3,tocIndex:13},{value:"\u662F\u5426\u5F00\u542Fdiff\u5BF9\u6BD4",paraId:3,tocIndex:13},{value:"FormProps",paraId:3,tocIndex:13},{value:" | ",paraId:3,tocIndex:13},{value:"true",paraId:3,tocIndex:13},{value:"void",paraId:3,tocIndex:13},{value:"\u7EE7\u627F antd - ",paraId:4,tocIndex:14},{value:"Form.Item",paraId:4,tocIndex:14},{value:"\u5C5E\u6027",paraId:5,tocIndex:14},{value:"\u8BF4\u660E",paraId:5,tocIndex:14},{value:"\u7C7B\u578B",paraId:5,tocIndex:14},{value:"\u9ED8\u8BA4\u503C",paraId:5,tocIndex:14},{value:"noStatus",paraId:5,tocIndex:14},{value:"\u4E0D\u663E\u793A\u9ED8\u8BA4\u7684diff\u6837\u5F0F - \u4F18\u5148\u7EA7\u4F4E\u4E8E",paraId:5,tocIndex:14},{value:"noStyle",paraId:5,tocIndex:14},{value:"boolean",paraId:5,tocIndex:14},{value:"false",paraId:5,tocIndex:14},{value:"\u7EE7\u627F antd - ",paraId:6,tocIndex:15},{value:"Form.List",paraId:6,tocIndex:15},{value:"\u5C5E\u6027",paraId:7,tocIndex:15},{value:"\u8BF4\u660E",paraId:7,tocIndex:15},{value:"\u7C7B\u578B",paraId:7,tocIndex:15},{value:"\u9ED8\u8BA4\u503C",paraId:7,tocIndex:15},{value:"uniqueKey",paraId:7,tocIndex:15},{value:"\u5217\u8868\u9879\u7684\u552F\u4E00key\uFF08\u975E\u5FC5\u586B\uFF09",paraId:7,tocIndex:15},{value:"NamePath",paraId:8,tocIndex:15},{value:"void",paraId:7,tocIndex:15},{value:"\u5305\u88F9\u5728",paraId:9,tocIndex:16},{value:"DiffForm.List",paraId:9,tocIndex:16},{value:"\u4E0B\u6BCF\u4E00\u9879\u7684\u6700\u5916\u5C42 ",paraId:9,tocIndex:16},{value:"\u5FC5\u9700",paraId:9,tocIndex:16},{value:"\u5C5E\u6027",paraId:10,tocIndex:16},{value:"\u8BF4\u660E",paraId:10,tocIndex:16},{value:"\u7C7B\u578B",paraId:10,tocIndex:16},{value:"\u9ED8\u8BA4\u503C",paraId:10,tocIndex:16},{value:"fieldName",paraId:10,tocIndex:16},{value:"\u5F53\u524D\u9879\u7684",paraId:10,tocIndex:16},{value:"field.name",paraId:10,tocIndex:16},{value:"number",paraId:10,tocIndex:16},{value:"void",paraId:10,tocIndex:16},{value:"noStatus",paraId:10,tocIndex:16},{value:"\u4E0D\u663E\u793A\u9ED8\u8BA4\u7684diff\u6837\u5F0F",paraId:10,tocIndex:16},{value:"boolean",paraId:10,tocIndex:16},{value:"false",paraId:10,tocIndex:16},{value:"\u7EE7\u627F antd - ",paraId:11,tocIndex:17},{value:"Form.ErrorList",paraId:11,tocIndex:17},{value:"\u5C5E\u6027",paraId:12,tocIndex:18},{value:"\u8BF4\u660E",paraId:12,tocIndex:18},{value:"\u7C7B\u578B",paraId:12,tocIndex:18},{value:"\u9ED8\u8BA4\u503C",paraId:12,tocIndex:18},{value:"children",paraId:12,tocIndex:18},{value:"\u5B50\u4EE3\u5143\u7D20",paraId:12,tocIndex:18},{value:"(diffFormInfo: ",paraId:12,tocIndex:18},{value:"DiffFormInfo",paraId:13,tocIndex:18},{value:") => ",paraId:12,tocIndex:18},{value:"ReactNode",paraId:12,tocIndex:18},{value:"void",paraId:12,tocIndex:18},{value:"\u83B7\u53D6\u7236\u4EE3\u7684diff\u72B6\u6001\u4FE1\u606F",paraId:14,tocIndex:19},{value:"\u5C5E\u6027",paraId:15,tocIndex:19},{value:"\u8BF4\u660E",paraId:15,tocIndex:19},{value:"\u7C7B\u578B",paraId:15,tocIndex:19},{value:"\u9ED8\u8BA4\u503C",paraId:15,tocIndex:19},{value:"children",paraId:15,tocIndex:19},{value:"\u5B50\u4EE3\u5143\u7D20",paraId:15,tocIndex:19},{value:"(diffStatus: ",paraId:15,tocIndex:19},{value:"StatusInfo",paraId:16,tocIndex:19},{value:") => ",paraId:15,tocIndex:19},{value:"ReactNode",paraId:15,tocIndex:19},{value:"void",paraId:15,tocIndex:19},{value:"\u5C5E\u6027",paraId:17,tocIndex:21},{value:"\u8BF4\u660E",paraId:17,tocIndex:21},{value:"\u7C7B\u578B",paraId:17,tocIndex:21},{value:"\u9ED8\u8BA4\u503C",paraId:17,tocIndex:21},{value:"locale",paraId:17,tocIndex:21},{value:"\u591A\u8BED\u8A00\u6587\u6848",paraId:17,tocIndex:21},{value:"Record<string, string>",paraId:17,tocIndex:21},{value:"{ADD: '\u65B0\u589E', REMOVE: '\u5220\u9664', MODIFY: '\u4FEE\u6539', EMPTY: '\u7A7A'}",paraId:17,tocIndex:21},{value:"color",paraId:17,tocIndex:21},{value:"diff\u7EBF\u6761\u989C\u8272",paraId:17,tocIndex:21},{value:"Record<string, string>",paraId:17,tocIndex:21},{value:"{ADD: '#52c41a', REMOVE: '#ff4d4f', MODIFY: '#faad14', EMPTY: '#d9d9d9'}",paraId:17,tocIndex:21},{value:"component",paraId:17,tocIndex:21},{value:"\u81EA\u5B9A\u4E49\u5DEE\u5F02\u8868\u5355\u5E03\u5C40\u65B9\u5F0F",paraId:17,tocIndex:21},{value:"FC<DiffFormComponentProps> | ComponentClass<DiffFormComponentProps>",paraId:17,tocIndex:21},{value:"\u5DE6\u53F3\u5E03\u5C40",paraId:17,tocIndex:21},{value:"wrapper",paraId:17,tocIndex:21},{value:"\u81EA\u5B9A\u4E49\u8868\u5355\u9879diff\u6837\u5F0F",paraId:17,tocIndex:21},{value:"FC<any> | ComponentClass<any>",paraId:17,tocIndex:21},{value:"\u865A\u7EBF\u7EBF\u6846",paraId:17,tocIndex:21},{value:"hook",paraId:18,tocIndex:22},{value:"\u63CF\u8FF0",paraId:18,tocIndex:22},{value:"\u8FD4\u56DE\u503C",paraId:18,tocIndex:22},{value:"DiffForm.useDiffFormInfo",paraId:18,tocIndex:22},{value:"\u7528\u4E8E\u5728\u8F83\u590D\u6742\u7684\u8868\u5355\u540E\u4EE3\u7EC4\u4EF6\u4E2D\u83B7\u53D6Form\u7684\u57FA\u672C\u4FE1\u606F",paraId:18,tocIndex:22},{value:"DiffFormInfo",paraId:19,tocIndex:22},{value:"DiffForm.useDiffFormStatus",paraId:18,tocIndex:22},{value:"\u81EA\u5B9A\u4E49\u8868\u5355\u9879\u6216diff\u6837\u5F0F\u65F6\uFF0C\u7528\u4E8E\u83B7\u53D6\u5F53\u524D\u8868\u5355\u9879\u7684\u53D8\u66F4\u72B6\u6001",paraId:18,tocIndex:22},{value:"StatusInfo",paraId:20,tocIndex:22},{value:"DiffForm.useForm",paraId:18,tocIndex:22},{value:"\u7EE7\u627F ",paraId:18,tocIndex:22},{value:"Form.useForm",paraId:18,tocIndex:22},{value:"Form.useForm",paraId:18,tocIndex:22},{value:"DiffForm.useFormInstance",paraId:18,tocIndex:22},{value:"\u7EE7\u627F ",paraId:18,tocIndex:22},{value:"Form.useFormInstance",paraId:18,tocIndex:22},{value:"Form.useFormInstance",paraId:18,tocIndex:22},{value:"DiffForm.useWatch",paraId:18,tocIndex:22},{value:"\u7EE7\u627F ",paraId:18,tocIndex:22},{value:"Form.useWatch",paraId:18,tocIndex:22},{value:"Form.useWatch",paraId:18,tocIndex:22},{value:"DiffForm.Item.useStatus",paraId:18,tocIndex:22},{value:"\u7EE7\u627F ",paraId:18,tocIndex:22},{value:"Form.Item.useStatus",paraId:18,tocIndex:22},{value:"Form.Item.useStatus",paraId:18,tocIndex:22},{value:"DiffForm.Item.useDiffValue",paraId:18,tocIndex:22},{value:"DiffForm.Item\u7684\u5B50\u7EC4\u4EF6\u4E2D\u83B7\u53D6\u5F53\u524D\u63A7\u4EF6\u4FE1\u606F",paraId:18,tocIndex:22},{value:"DiffItemContextType | null",paraId:18,tocIndex:22},{value:"\u7EE7\u627F\u81EA antd ",paraId:21,tocIndex:24},{value:"FormInstance",paraId:21,tocIndex:24},{value:`type NamePaths = (string | number)[];
`,paraId:22,tocIndex:25},{value:`type NamePath = string | number | (string | number)[];
`,paraId:23,tocIndex:26},{value:`interface DiffFormInfo {
  /**
  * @description \u662F\u5426\u5F00\u542Fdiff
  */
  diffEnable?: boolean;
  /**
   * @description \u5F53\u524DForm\u7C7B\u578B\uFF08source/target\uFF09
   */
  type?: DiffFormTypes;
  /**
   * @description Form\u7684disabled\u5C5E\u6027
   */
  disabled?: boolean;
  /**
   * @description Form\u7684name\u5C5E\u6027
   */
  name?: string;
  /**
   * @description \u6240\u6709\u7236\u7EA7name\u7684\u8054\u5408
   */
  namePaths?: NamePaths;
  /**
   * @description \u5F53\u524DFormListItem\u7684field.name
   */
  fieldName?: number;
}
`,paraId:24,tocIndex:27},{value:`export enum DiffFormTypes {
  SOURCE = '_DIFF_FORM_TYPE_SOURCE_',
  TARGET = '_DIFF_FORM_TYPE_TARGET_',
}
`,paraId:25,tocIndex:28},{value:`export interface StatusInfo {
  code: StatusCode,
  color: string;
  text: string;
}
`,paraId:26,tocIndex:29},{value:`export enum StatusCode {
  REMOVE = 'REMOVE',
  ADD = 'ADD',
  MODIFY = 'MODIFY',
  EMPTY = 'EMPTY',
}
`,paraId:27,tocIndex:30},{value:`export interface DiffFormComponentProps {
  source?: ReactNode;
  target?: ReactNode;
}
`,paraId:28,tocIndex:31},{value:`interface DiffItemContextType {
  name: NamePaths;
  fullName: NamePaths;
  value: any;
  anotherValue: any;
}
`,paraId:29,tocIndex:32},{value:"\u8868\u5355\u573A\u666F\u5F80\u5F80\u975E\u5E38\u590D\u6742\uFF0C\u5B58\u5728\u5404\u79CD\u8868\u5355\u8054\u52A8\u573A\u666F\uFF0C\u5982\u679C\u53EA\u663E\u793A\u4E00\u4E2A\u8868\u5355\u7684\u8BDD\uFF0C\u4E00\u4E9B\u8868\u5355\u9879\u56E0\u4E3A\u8054\u52A8\u6216\u5220\u9664\u800C\u5BFC\u81F4\u7684\u9690\u85CF\u5C06\u4E0D\u4F1A\u663E\u793A\u5728\u9875\u9762\u4E0A\uFF0C\u4ECE\u800C\u5BFC\u81F4\u6570\u636E\u5BA1\u67E5\u4E0A\u7684\u9057\u6F0F\u3002",paraId:30,tocIndex:34},{value:"\u8BF7\u786E\u5B9A\u8FD9\u4E24\u6761\u6570\u636E\u7684\u6570\u636E\u7C7B\u578B\u76F8\u540C\uFF0C\u5B57\u7B26\u4E32",paraId:31,tocIndex:35},{value:'"0"',paraId:31,tocIndex:35},{value:"\u4E0D\u7B49\u4E8E\u6570\u5B57",paraId:31,tocIndex:35},{value:"0",paraId:31,tocIndex:35},{value:"\u53E6\u5916\uFF1A",paraId:32,tocIndex:35},{value:"\u5F53\u6570\u636E\u4E3A",paraId:33,tocIndex:35},{value:"undefined",paraId:33,tocIndex:35},{value:"\u3001",paraId:33,tocIndex:35},{value:"null",paraId:33,tocIndex:35},{value:"\u3001",paraId:33,tocIndex:35},{value:"''",paraId:33,tocIndex:35},{value:"\u3001",paraId:33,tocIndex:35},{value:"[]",paraId:33,tocIndex:35},{value:"\u65F6\uFF0C\u8FD9\u4E2A\u5B57\u6BB5\u5C06\u88AB\u8BA4\u4E3A\u662F",paraId:33,tocIndex:35},{value:"\u7A7A",paraId:33,tocIndex:35},{value:";",paraId:33,tocIndex:35},{value:"\u4E24\u4E2A\u6570\u636E\u7684\u5BF9\u6BD4\u65B9\u5F0F\u4F7F\u7528",paraId:33,tocIndex:35},{value:"lodash.isEqual",paraId:33,tocIndex:35},{value:";",paraId:33,tocIndex:35}]},93706:function(u,o){o.Z=`import React from 'react';
import { Input } from 'antd';
import { DiffForm, DiffFormConfigProvider } from 'bello';

export default () => {

  return (
    <DiffFormConfigProvider
      color={{
        ADD: 'blue',
        REMOVE: 'black',
        EMPTY: '#ffa940',
        MODIFY: 'rgba(255,255,255,.8)',
      }}
    >
      <DiffForm
        diff
        initialValues={{
          customColor: '\u81EA\u5B9A\u4E49\u989C\u8272',
        }}
      >
        <DiffForm.Item
          name={'customColor'}
        >
          <Input />
        </DiffForm.Item>
      </DiffForm>
    </DiffFormConfigProvider>
  );
};
`},22394:function(u,o){o.Z=`import React from 'react';
import { Col, Collapse, Input, InputNumber, Row } from 'antd';
import { DiffFormConfigProvider, DiffForm } from 'bello';
import type { DiffFormComponentProps } from 'bello';

const Custom = (props: DiffFormComponentProps) => {

  const { source, target } = props;

  return (
    <Collapse
      defaultActiveKey={['target']}
      items={[
        {
          key: 'source',
          label: '\u53D8\u66F4\u524D',
          children: source,
          forceRender: true,
        },
        {
          key: 'target',
          label: '\u53D8\u66F4\u540E',
          children: target,
          forceRender: true,
        },
      ]}
    />
  );
};

export default () => {
  return (
    <DiffFormConfigProvider
      component={Custom}
    >
      <DiffForm
        layout={'vertical'}
        diff
        initialValues={{
          year: '2024',
          income: 10000,
        }}
      >
        <Row gutter={8}>
          <Col span={12}>
            <DiffForm.Item
              label={'\u5E74\u4EFD'}
              name={'year'}
            >
              <Input />
            </DiffForm.Item>
          </Col>
          <Col span={12}>
            <DiffForm.Item
              label={'\u6536\u5165'}
              name={'income'}
            >
              <InputNumber min={1} style={{ width: '100%' }} />
            </DiffForm.Item>
          </Col>
        </Row>
      </DiffForm>
    </DiffFormConfigProvider>
  );
};
`},93876:function(u,o){o.Z=`import React, { cloneElement } from 'react';
import type { ReactElement } from 'react';
import { DatePicker, Input } from 'antd';
import { DiffForm, PassProps } from 'bello';

interface CustomWrapperProps {
  children: ReactElement;
  [prop: string]: any;
}
const CustomWrapper = (props: CustomWrapperProps) => {

  const { children, ...extra } = props;
  const status = DiffForm.useDiffFormStatus();

  return (
    <div
      style={{
        padding: 8,
        background: status?.color,
      }}
    >{cloneElement(children, extra)}</div>
  );
};

export default () => {

  return (
    <DiffForm
      diff
      initialValues={{
        customWrapper: '\u81EA\u5B9A\u4E49diff\u6837\u5F0F',
      }}
      layout='vertical'
    >
      <DiffForm.Item
        label={'\u8868\u5355\u9879\u4E00'}
        name={'customWrapper'}
        noStatus
        extra={'\u81EA\u5B9A\u4E49\u8BE5\u8868\u5355\u9879\u7684diff\u6837\u5F0F'}
      >
        <CustomWrapper>
          <Input />
        </CustomWrapper>
      </DiffForm.Item>
      <DiffForm.Item
        label={'\u8868\u5355\u9879\u4E8C'}
        name={'date'}
        extra={'DatePicker\u7531\u4E8E\u6BCF\u6B21\u9009\u62E9\u7684\u65E5\u671F\u90FD\u662F\u5E26\u65F6\u5206\u79D2\u7684\uFF0C\u6240\u4EE5\u5373\u4F7F\u5DE6\u53F3\u4E24\u8FB9\u9009\u62E9\u540C\u6837\u7684\u65E5\u671F\uFF0C\u53D8\u66F4\u72B6\u6001\u4ECD\u7136\u662FModified'}
      >
        <DatePicker
          style={{ width: '100%' }}
        />
      </DiffForm.Item>
      <DiffForm.Item
        label={'DatePicker'}
        name={'date2'}
        extra={'\u89E3\u51B3\u4E0A\u8FB9\u7684\u95EE\u9898\uFF08\u770B\u6E90\u4EE3\u7801\uFF09'}
      >
        <PassProps>
          {
            p => {
              return (
                <DatePicker
                  {...p}
                  style={{ width: '100%' }}
                  onChange={(e) => {
                    // \u5C06\u65F6\u5206\u79D2\u6BEB\u79D2\u90FD\u7F6E\u4E3A0
                    return p.onChange?.(e ? e.hour(0).minute(0).second(0).millisecond(0) : e);
                  }}
                />
              );
            }
          }
        </PassProps>
      </DiffForm.Item>
    </DiffForm>
  );
};
`},57302:function(u,o){o.Z=`import React from 'react';
import { Input } from 'antd';
import { DiffForm, DiffFormConfigProvider } from 'bello';

export default () => {

  return (
    <DiffFormConfigProvider
      locale={{
        ADD: '\u65B0\u6570\u636E',
        REMOVE: '\u5220\u9664\u6570\u636E',
        EMPTY: '\u6CA1\u6709\u6570\u636E',
        MODIFY: '\u4FEE\u6539\u6570\u636E',
      }}
    >
      <DiffForm
        diff
        initialValues={{
          customName: '\u81EA\u5B9A\u4E49\u6587\u6848',
        }}
      >
        <DiffForm.Item
          name={'customName'}
        >
          <Input />
        </DiffForm.Item>
      </DiffForm>
    </DiffFormConfigProvider>
  );
};
`},4296:function(u,o){o.Z=`import React from 'react';
import type { ReactNode } from 'react';
import { DiffFormConfigProvider, DiffForm } from 'bello';
import { Input, Select } from 'antd';

const Custom = (props: { children?: ReactNode }) => {

  const { children } = props;
  const status = DiffForm.useDiffFormStatus();

  return (
    <div
      style={{
        border: status ? \`3px solid \${status.color}\` : undefined,
        borderRadius: 8,
        padding: 8,
      }}
    >
      <span>{status?.text}</span>
      {children}
    </div>
  );
};

export default () => {
  return (
    <DiffFormConfigProvider
      wrapper={Custom}
    >
      <DiffForm
        layout={'vertical'}
        diff={{
          initialValues: {
            name: '\u5F20\u9E4F',
            sex: 1,
          },
        }}
        initialValues={{
          name: '\u5F20\u670B',
        }}
      >
        <DiffForm.Item
          label={'\u59D3\u540D'}
          name={'name'}
        >
          <Input />
        </DiffForm.Item>
        <DiffForm.Item
          label={'\u6027\u522B'}
          name={'sex'}
        >
          <Select
            options={[
              {
                label: '\u5973',
                value: 0,
              },
              {
                label: '\u7537',
                value: 1,
              },
            ]}
          />
        </DiffForm.Item>
      </DiffForm>
    </DiffFormConfigProvider>
  );
};
`},9658:function(u,o){o.Z=`import React, { useState } from 'react';
import { Col, ConfigProvider, Input, Radio, Row } from 'antd';
import zhCN from 'antd/locale/zh_CN';
import enUS from 'antd/locale/en_US';
import { DiffForm } from 'bello';

export default () => {

  const [lang, setLang] = useState(enUS);

  return (
    <ConfigProvider
      locale={lang}
    >
      <Row gutter={[0, 16]}>
        <Col span={24}>
          <Radio.Group
            defaultValue={'en'}
            options={[
              {
                label: '\u4E2D\u6587',
                value: 'zh-cn',
              },
              {
                label: 'English',
                value: 'en',
              },
            ]}
            onChange={e => {
              if (e.target.value === 'zh-cn') {
                setLang(zhCN);
              } else {
                setLang(enUS);
              }
            }}
          />
        </Col>
        <Col span={24}>
          <DiffForm
            diff={{
              initialValues: {
                defaultName: '\u9ED8\u8BA4\u6587\u6848',
              },
            }}
          >
            <DiffForm.Item
              name={'defaultName'}
            >
              <Input />
            </DiffForm.Item>
          </DiffForm>
        </Col>
      </Row>
    </ConfigProvider>
  );
};
`},71340:function(u,o){o.Z=`import React, { useMemo, useState, useEffect } from 'react';
import { DiffForm, DiffFormTypes } from 'bello';
import type { DiffFormProps } from 'bello';
import { Button, Card, Col, Input, InputNumber, Row, Space, Switch, Typography } from 'antd';
import { DeleteOutlined, PlusOutlined } from '@ant-design/icons';

const Parents = () => {

  const { fieldName } = DiffForm.useDiffFormInfo();

  return (
    <Card
      title={'\u5BB6\u957F'}
      size={'small'}
      bordered={false}
      bodyStyle={{ background: '#f3f3f3' }}
      headStyle={{ background: '#f3f3f3' }}
    >
      <DiffForm.List
        name={[fieldName!, 'parents']}
      >
        {
          (fields, { add, remove }) => {
            return (
              <>
                <Row gutter={[0, 16]}>
                  {
                    fields.map(field => {
                      return (
                        <Col key={field.key} span={24}>
                          <DiffForm.ListItem fieldName={field.name}>
                            <Row gutter={8} align={'middle'}>
                              <Col span={11} xxl={7}>
                                <DiffForm.Item
                                  name={[field.name, 'name']}
                                  label={'\u59D3\u540D'}
                                  rules={[
                                    { required: true, message: '\u5FC5\u586B\u9879' },
                                  ]}
                                  style={{ marginBottom: 0 }}
                                >
                                  <Input />
                                </DiffForm.Item>
                              </Col>
                              <Col span={11} xxl={7}>
                                <DiffForm.Item
                                  name={[field.name, 'relation']}
                                  label={'\u5173\u7CFB'}
                                  style={{ marginBottom: 0 }}
                                >
                                  <Input />
                                </DiffForm.Item>
                              </Col>
                              <Col span={20} xxl={7}>
                                <DiffForm.Item
                                  name={[field.name, 'phone']}
                                  label={'\u624B\u673A\u53F7'}
                                  style={{ marginBottom: 0 }}
                                >
                                  <Input />
                                </DiffForm.Item>
                              </Col>
                              <Col style={{ paddingTop: 26 }}>
                                <Typography.Link
                                  type={'danger'}
                                  onClick={() => remove(field.name)}
                                >
                                  <DeleteOutlined />
                                </Typography.Link>
                              </Col>
                            </Row>
                          </DiffForm.ListItem>
                        </Col>
                      );
                    })
                  }
                  <Col span={24}>
                    <Button
                      block
                      icon={
                        <PlusOutlined />
                      }
                      onClick={() => add()}
                      size={'small'}
                    >\u6DFB\u52A0\u5BB6\u957F</Button>
                  </Col>
                </Row>
              </>
            );
          }
        }
      </DiffForm.List>
    </Card>
  );
};

const Students = () => {

  const form = DiffForm.useFormInstance();

  return (
    <Card
      title={'\u5B66\u751F\u540D\u5355'}
      size={'small'}
    >
      <DiffForm.List
        name={'students'}
        uniqueKey={'name'}
      >
        {
          (fields, { add, remove }) => {
            return (
              <>
                <Row gutter={[0, 16]}>
                  {
                    fields.map(field => {
                      return (
                        <Col key={field.key} span={24}>
                          <DiffForm.ListItem fieldName={field.name}>
                            <Row gutter={[8, 8]} align={'middle'}>
                              <Col span={11} xxl={7}>
                                <DiffForm.Item
                                  name={[field.name, 'name']}
                                  label={'\u5B66\u751F\u59D3\u540D'}
                                  style={{ marginBottom: 0 }}
                                  rules={[
                                    { required: true, message: '\u5FC5\u586B\u9879' },
                                    {
                                      validator(_, value) {
                                        const list: any[] = form.getFieldValue(['students']) || [];
                                        if (list.some((v, k) => k !== field.name && v?.name === value)) {
                                          return Promise.reject(new Error('\u59D3\u540D\u91CD\u590D'));
                                        }
                                        return Promise.resolve();
                                      },
                                    },
                                  ]}
                                >
                                  <Input />
                                </DiffForm.Item>
                              </Col>
                              <Col span={11} xxl={7}>
                                <DiffForm.Item
                                  name={[field.name, 'age']}
                                  label={'\u5E74\u9F84'}
                                  style={{ marginBottom: 0 }}
                                >
                                  <InputNumber style={{ width: '100%' }} />
                                </DiffForm.Item>
                              </Col>
                              <Col span={20} xxl={7}>
                                <DiffForm.Item
                                  name={[field.name, 'height']}
                                  label={'\u8EAB\u9AD8'}
                                  style={{ marginBottom: 0 }}
                                >
                                  <InputNumber style={{ width: '100%' }} addonAfter='cm' />
                                </DiffForm.Item>
                              </Col>
                              <Col style={{ paddingTop: 26 }}>
                                <Typography.Link
                                  type={'danger'}
                                  onClick={() => remove(field.name)}
                                >
                                  <DeleteOutlined />
                                </Typography.Link>
                              </Col>
                              <Col span={24}>
                                <Parents />
                              </Col>
                            </Row>
                          </DiffForm.ListItem>
                        </Col>
                      );
                    })
                  }
                  <Col span={24}>
                    <Button
                      block
                      icon={
                        <PlusOutlined />
                      }
                      onClick={() => add()}
                    >\u6DFB\u52A0\u5B66\u751F</Button>
                  </Col>
                </Row>
              </>
            );
          }
        }
      </DiffForm.List>
    </Card>
  );
};

export default () => {

  const [form] = DiffForm.useForm();
  const [enable, setEnable] = useState(true);
  const diff = useMemo<DiffFormProps['diff']>(() => {
    if (enable) {
      return {
        initialValues: {
          clazz: '\u4E09\u5E74\u4E8C\u73ED',
          students: [
            {
              name: '\u6C5F\u5C0F\u660E',
              age: 13,
              height: 160,
              parents: [
                {
                  name: '\u6C5F\u5927\u767D',
                  relation: '\u7236\u4EB2',
                },
              ],
            },
          ],
        },
      };
    }
  }, [enable]);

  useEffect(() => {
    form.resetFields();
  }, [form]);

  return (
    <Row gutter={[0, 16]}>
      <Space>
        <span>\u662F\u5426\u5F00\u542Fdiff\u5BF9\u6BD4\u529F\u80FD</span>
        <Switch defaultChecked checkedChildren={'\u5F00\u542F'} unCheckedChildren={'\u5173\u95ED'} onChange={e => setEnable(e)} />
      </Space>
      <DiffForm
        diff={diff}
        layout='vertical'
        form={form}
        initialValues={{
          clazz: '\u4E09\u5E742\u73ED',
          students: [
            {
              name: '\u6C5F\u5C0F\u660E',
              age: 12,
              height: 155,
              parents: [
                {
                  name: '\u6C5F\u5927\u767D',
                  relation: '\u7236\u5B50',
                  phone: '13999999999',
                },
                {
                  name: '\u4F5F\u4E3D\u5A05',
                  relation: '\u6BCD\u5B50',
                  phone: '13888888888',
                },
              ],
            },
          ],
        }}
      >
        <DiffForm.Info>
          {
            (diformInfo) => {
              return (
                <Card
                  title={diformInfo.type === DiffFormTypes.SOURCE ? '\u53D8\u66F4\u524D' : '\u53D8\u66F4\u540E'}
                  bodyStyle={{ padding: 8 }}
                >
                  <DiffForm.Item
                    name={'clazz'}
                    label={'\u73ED\u7EA7'}
                    rules={[
                      { required: true },
                    ]}
                  >
                    <Input />
                  </DiffForm.Item>
                  <Students />
                </Card>
              );
            }
          }
        </DiffForm.Info>
      </DiffForm>
    </Row>
  );
};
`},40727:function(u,o){o.Z=`import React from 'react';
import { DiffForm, PassProps } from 'bello';
import { Col, Input, Row, Tabs } from 'antd';

export default () => {

  const [form] = DiffForm.useForm();

  return (
    <>
      <DiffForm
        form={form}
        layout={'vertical'}
        diff={{
          initialValues: {
            products: [
              {
                type: 'iphone 15 pro',
                ram: '8gb',
              },
            ],
          },
        }}
        initialValues={{
          products: [
            {
              type: 'iphone 15 pro max',
              ram: '16gb',
            },
          ],
        }}
      >
        <DiffForm.List
          name={['products']}
          uniqueKey={['type']}
        >
          {
            (fields, { add, remove }) => {
              return (
                <Tabs
                  type='editable-card'
                  onEdit={(e, action) => {
                    if (action === 'add') {
                      add();
                    } else {
                      remove(Number(e));
                    }
                  }}
                  items={fields.map(field => {
                    return {
                      label: (
                        <DiffForm.ListItem
                          fieldName={field.name}
                          noStatus
                        >
                          <DiffForm.DiffStatus>
                            {
                              (diffStatus) => {
                                return (
                                  <DiffForm.Item
                                    name={[field.name, 'type']}
                                    noStyle
                                  >
                                    <PassProps>
                                      {
                                        p => {
                                          return (
                                            <span style={{ color: diffStatus?.color }}>{p.value || '\u672A\u914D\u7F6E'}</span>
                                          );
                                        }
                                      }
                                    </PassProps>
                                  </DiffForm.Item>
                                );
                              }
                            }
                          </DiffForm.DiffStatus>
                        </DiffForm.ListItem>
                      ),
                      key: \`\${field.name}\`,
                      children: (
                        <DiffForm.ListItem
                          key={field.key}
                          fieldName={field.name}
                        >
                          <Row gutter={8}>
                            <Col span={12}>
                              <DiffForm.Item
                                label={'\u578B\u53F7'}
                                name={[field.name, 'type']}
                                style={{ marginBottom: 0 }}
                              >
                                <Input />
                              </DiffForm.Item>
                            </Col>
                            <Col span={12}>
                              <DiffForm.Item
                                label={'\u5185\u5B58'}
                                name={[field.name, 'ram']}
                                style={{ marginBottom: 0 }}
                              >
                                <Input />
                              </DiffForm.Item>
                            </Col>
                          </Row>
                        </DiffForm.ListItem>
                      ),
                    };
                  })}
                />
              );
            }
          }
        </DiffForm.List>
      </DiffForm>
    </>
  );
};
`}}]);
