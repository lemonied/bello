(self.webpackChunkbello=self.webpackChunkbello||[]).push([[81],{46640:function(b,D,o){"use strict";o.d(D,{y:function(){return N}});var C=o(97857),v=o.n(C),j=o(13769),M=o.n(j),i=o(67294),F=o(71230),K=o(15746),P=o(48413),E=o(96486),x=o(77959);function g(s){return typeof s=="undefined"||s===null||s===""}function V(s,n){return g(s)&&g(n)?!0:(0,E.isEqual)(s,n)}var oe=function(n,e,t){if(g(n)&&!g(e))return t===x.z.SOURCE?x.$.EMPTY:x.$.REMOVE;if(!g(n)&&g(e))return t===x.z.SOURCE?x.$.REMOVE:x.$.ADD;if(!V(n,e))return x.$.MODIFY},ae=o(98030),d=o(85893),Y=(0,i.createContext)({}),U=function(n){var e=n.children,t=n.value,r=(0,i.useContext)(Y),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,d.jsx)(Y.Provider,{value:u,children:e})},$=(0,i.createContext)({}),A=function(n){var e=n.children,t=n.value,r=(0,i.useContext)($),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,d.jsx)($.Provider,{value:u,children:e})},ze=o(84820),ie=o(96695),se=o.n(ie),le=o(19632),p=o.n(le),fe=o(12444),ve=o.n(fe),de=o(72004),ce=o.n(de),me=o(9783),G=o.n(me),B=function(){function s(){ve()(this,s),G()(this,"state",{}),G()(this,"subscribers",[])}return ce()(s,[{key:"setState",value:function(e){s.updateState(this.state,e)}},{key:"getSnapshots",value:function(){return this.state}},{key:"getSnapshot",value:function(e){var t=e.names,r=e.type;if(t&&r)return this.state[[r].concat(p()(t)).join(s.keySplit)]}},{key:"getUniqueFieldsSnapshots",value:function(e){var t=e.names,r=e.type,u=e.uniqueKey;if(t&&r&&u)return(0,E.pickBy)(this.state,function(l,a){return new RegExp("^".concat(s.join([s.join([r].concat(p()(t))),"\\d",s.join(u)]),"$")).test(a)})}},{key:"getChildSnapshots",value:function(e){var t=e.names,r=e.type;if(t&&r){var u=s.join([r].concat(p()(t)));return(0,E.pickBy)(this.state,function(l,a){return a.startsWith(u)})}}},{key:"emit",value:function(e){var t=s.join([e.type].concat(p()(e.names))),r=this.state[t];this.setState(e);var u=se()(this.subscribers),l;try{for(u.s();!(l=u.n()).done;){var a=l.value;a.onlyValue&&!e.remove&&r&&V(e.value,r.value)||(a.fuzzy&&t.startsWith(a.key)||a.uniqueKey&&new RegExp("^".concat(s.join([(0,E.escapeRegExp)(a.key),"\\d",(0,E.escapeRegExp)(s.join(a.uniqueKey))]),"$")).test(t)||t===a.key)&&a.callback(e)}}catch(f){u.e(f)}finally{u.f()}}},{key:"on",value:function(e,t){var r=this,u=[t.type].concat(p()(t.names)).join(s.keySplit),l=v()(v()({},t),{},{key:u,callback:e});return this.subscribers.push(l),function(){var a=r.subscribers.indexOf(l);a>-1&&r.subscribers.splice(a,1)}}}],[{key:"join",value:function(e){return e.join(s.keySplit)}},{key:"updateState",value:function(e,t){var r=[t.type].concat(p()(t.names)).join(s.keySplit);return t.remove?delete e[r]:e[r]=t,e}}]),s}();G()(B,"keySplit","_DIFORM_STORE_KEY_SPLIT_");var y=function(){return(0,i.useContext)(Y)},H=function(){var n=y(),e=n.type;return e===x.z.SOURCE?x.z.TARGET:x.z.SOURCE},he=function(n){var e=(0,i.useRef)(n);return e.current=n,(0,i.useCallback)(function(){return e.current.apply(e,arguments)},[])},xe=function(n){var e=(0,i.useRef)(),t=(0,i.useRef)(n);return t.current!==n&&(e.current=t.current,t.current=n),e.current},J=function(n,e){var t=(0,i.useRef)(),r=xe(e);return(typeof e=="undefined"||!(0,E.isEqual)(r,e))&&(t.current=n()),t.current},Q=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=e[0],u=e.slice(1),l=he(r);return J(function(){return E.debounce.apply(void 0,[l].concat(p()(u)))},[u])},ye=o(91269),k={"zh-cn":{ADD:"\u65B0\u589E",REMOVE:"\u5220\u9664",MODIFY:"\u4FEE\u6539",EMPTY:"\u7A7A"},en:{ADD:"New",REMOVE:"Remove",MODIFY:"Modified",EMPTY:"Empty"}},w=function(){return(0,i.useContext)(ae.B)},De=function(){var n,e,t=(0,i.useContext)(ye.ZP.ConfigContext),r=w(),u=(n=(e=t.locale)===null||e===void 0?void 0:e.locale)!==null&&n!==void 0?n:"en";return(0,i.useCallback)(function(l){var a,f,m=r==null?void 0:r.locale,h=(a=k[u])!==null&&a!==void 0?a:k.en,c=Object.assign({},h,m);return(f=c[l])!==null&&f!==void 0?f:l},[u,r==null?void 0:r.locale])},ee=function(){var n=De(),e=w();return(0,i.useCallback)(function(t){if(t){var r,u;return v()(v()({},t),{},{text:n(t.code),color:(r=e==null||(u=e.color)===null||u===void 0?void 0:u[t.code])!==null&&r!==void 0?r:t.color})}},[e==null?void 0:e.color,n])},W=function(){return(0,i.useContext)($)},Z=function(n){return J(function(){if(typeof n!="undefined")return Array.isArray(n)?n.length?n:void 0:[n]},[n])},Ce=o(5574),X=o.n(Ce),L=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return J(function(){if(!e.some(function(u){return typeof u=="undefined"})){var r=E.concat.apply(void 0,e);return r.length?r:void 0}},[e])},Pe=function(n){var e=Z(n),t=y(),r=t.fullNamePath;return L(r,e)},te=function(n){var e=Z(n),t=y(),r=t.anotherFieldName,u=t.uniqueKey;return(0,i.useMemo)(function(){return u&&typeof r=="number"&&typeof(e==null?void 0:e[0])=="number"?[r].concat(p()(e.slice(1))):e},[r,e,u])},_=function(n,e){var t=y(),r=t.store,u=(0,i.useState)(function(){return r==null?void 0:r.getSnapshot({type:n,names:e})}),l=X()(u,2),a=l[0],f=l[1],m=Q(function(h){f(h)},300);return(0,i.useEffect)(function(){if(e&&n&&r){m(r.getSnapshot({type:n,names:e}));var h=r.on(function(c){m(c.remove?void 0:c)},{names:e,type:n,onlyValue:!0});return function(){h(),m.cancel()}}},[n,e,r,m]),a},Be=function(n){var e=useDiformContext(),t=e.type,r=useNextNames(n);return _(t,r)},Ee=function(n){var e=y(),t=e.anotherFullNamePath,r=H(),u=te(n),l=L(t,u);return _(r,l)},Se=function(n){var e=y(),t=e.type,r=e.fullNamePath,u=e.uniqueKey,l=L(r,n,u);return _(t,l)},Ie=function(){var n=y(),e=n.store,t=n.anotherFullNamePath,r=n.uniqueKey,u=H(),l=(0,i.useState)(function(){return e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r})}),a=X()(l,2),f=a[0],m=a[1],h=(0,i.useRef)(f),c=Q(function(){m(h.current)},300);return(0,i.useEffect)(function(){if(t&&u&&e&&r){h.current=e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),c();var I=e.on(function(S){h.current=h.current?B.updateState(v()({},h.current),S):e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),c()},{names:t,type:u,uniqueKey:r,onlyValue:!0});return function(){I(),c.cancel()}}},[t,c,e,u,r]),f},Me=function(n){var e=y(),t=e.store,r=e.anotherFullNamePath,u=L(r,n),l=H(),a=(0,i.useRef)((0,i.useMemo)(function(){return t==null?void 0:t.getChildSnapshots({names:u,type:l})},[])),f=(0,i.useState)(!(0,E.isEmpty)(a.current)),m=X()(f,2),h=m[0],c=m[1],I=Q(function(){c(!(0,E.isEmpty)(a.current))},300);return(0,i.useEffect)(function(){if(u&&l&&t){a.current=t.getChildSnapshots({type:l,names:u}),I();var S=t.on(function(R){a.current=a.current?B.updateState(v()({},a.current),R):t==null?void 0:t.getChildSnapshots({names:u,type:l}),I()},{names:u,type:l,onlyValue:!0,fuzzy:!0});return function(){S(),I.cancel()}}},[l,u,t,I]),h},je=function(n){var e=y(),t=e.uniqueKey,r=e.anotherFullNamePath,u=Ie(),l=Se(n),a=Me(n);return(0,i.useMemo)(function(){if(t&&u&&l&&r){var f;return(f=(0,E.values)(u).find(function(m){return V(m.value,l.value)}))===null||f===void 0?void 0:f.names[r.length]}return a?n:void 0},[t,u,l,r,a,n])},Ne=o(93967),Oe=o.n(Ne),ne=function(n){var e=n.className,t=n.style,r=n.children,u=y(),l=u.statusInfo,a=u.firstStatus,f=a?l:null;return(0,d.jsxs)("div",{className:Oe()(e,{"bello-diform-mark":f}),style:v()({borderColor:f==null?void 0:f.color},t),children:[f?(0,d.jsxs)("div",{className:"bello-diform-mark-divider",children:[(0,d.jsx)("span",{style:{borderColor:f.color}}),(0,d.jsx)("span",{style:{color:f.color},children:l==null?void 0:l.text}),(0,d.jsx)("span",{style:{borderColor:f.color}})]}):null,r]})},ge=["children","name","noStatus"],pe=["children","noStatus"],Re=function(n){var e=n.children,t=n.name,r=n.noStatus,u=M()(n,ge),l=y(),a=l.type,f=l.store,m=l.statusInfo,h=l.firstStatus,c=Ee(t),I=ee(),S=Pe(t),R=(0,i.useRef)(f);R.current=f;var T=(0,i.useMemo)(function(){if(a){var O=u.value,q=c==null?void 0:c.value;return I(oe(O,q,a))}},[c==null?void 0:c.value,u.value,a,I]),z=(0,i.useMemo)(function(){return{statusInfo:T!=null?T:m,firstStatus:!h&&!m&&!!T}},[h,T,m]),ue=(0,i.useMemo)(function(){return v()(v()({},u),{},{diffstatus:z.firstStatus?z.statusInfo:void 0})},[u,z.statusInfo,z.firstStatus]);return(0,i.useEffect)(function(){if(S&&a){var O,q=u.value;(O=R.current)===null||O===void 0||O.emit({type:a,names:S,value:q,statusInfo:T})}},[u.value,S,T,a]),(0,i.useEffect)(function(){if(a&&S)return function(){var O;return(O=R.current)===null||O===void 0?void 0:O.emit({type:a,names:S,remove:!0})}},[S,a]),(0,d.jsx)(U,{value:z,children:r?(0,i.cloneElement)(e,ue):(0,d.jsx)(ne,{children:(0,i.cloneElement)(e,ue)})})},re=function(n){var e=n.children,t=n.noStatus,r=M()(n,pe),u=y(),l=Z(n.name);return typeof u.type!="undefined"&&l&&(0,i.isValidElement)(e)?(0,d.jsx)(P.Z.Item,v()(v()({},r),{},{children:(0,d.jsx)(Re,{name:r.name,noStatus:r.noStyle||t,children:e})})):(0,d.jsx)(P.Z.Item,v()(v()({},r),{},{children:e}))};re.useStatus=P.Z.Item.useStatus;var Fe=["uniqueKey"],Ae=["uniqueKey"],Te=function(n){var e=n.uniqueKey,t=M()(n,Fe),r=y(),u=r.anotherFullNamePath,l=W(),a=l.namePaths,f=te(t.name),m=L(u,f),h=Z(e),c=(0,i.useMemo)(function(){return{fullNamePath:a,anotherFullNamePath:m,uniqueKey:h}},[a,m,h]);return(0,d.jsx)(U,{value:c,children:(0,d.jsx)(P.Z.List,v()({},t))})},Ke=function(n){var e=n.uniqueKey,t=M()(n,Ae),r=y(),u=W(),l=u.namePaths,a=L(l,n.name),f=(0,i.useMemo)(function(){return{namePaths:a}},[a]);return typeof r.type!="undefined"?(0,d.jsx)(A,{value:f,children:(0,d.jsx)(Te,v()(v()({},t),{},{uniqueKey:e}))}):(0,d.jsx)(A,{value:f,children:(0,d.jsx)(P.Z.List,v()({},t))})},Ue=function(n){var e=n.children,t=n.noStatus,r=W(),u=r.fieldName,l=je(u),a=y(),f=a.statusInfo,m=a.type,h=a.firstStatus,c=ee(),I=(0,i.useMemo)(function(){if(f)return f;if(typeof l!="number")return m===x.z.SOURCE?c(x.$.REMOVE):c(x.$.ADD)},[l,f,m,c]),S=(0,i.useMemo)(function(){return{fieldName:u,anotherFieldName:l,statusInfo:I,firstStatus:!h&&!f&&!!I}},[u,h,l,I,f]),R=(0,i.useMemo)(function(){return(0,i.isValidElement)(e)?(0,i.cloneElement)(e,{diffstatus:S.statusInfo}):e},[e,S.statusInfo]);return(0,d.jsx)(U,{value:S,children:t?R:(0,d.jsx)(ne,{children:R})})},Le=function(n){var e=y(),t=(0,i.useMemo)(function(){return{fieldName:n.fieldName}},[n.fieldName]);return typeof e.type!="undefined"?(0,d.jsx)(A,{value:t,children:(0,d.jsx)(Ue,v()({},n))}):(0,d.jsx)(A,{value:t,children:n.children})},be=function(n){var e=n.children,t=W();return(0,d.jsx)(d.Fragment,{children:e(t)})},We=["diff"],N=function(n){var e=n.diff,t=M()(n,We),r=(0,i.useMemo)(function(){var c={layout:t.layout,name:"source"};if(e===!0)return c;if(e)return v()(v()({},c),e)},[e,t.layout]),u=(0,i.useMemo)(function(){return v()({name:r?"target":void 0},t)},[t,r]),l=(0,i.useMemo)(function(){return{store:new B,fullNamePath:[],anotherFullNamePath:[]}},[]),a=(0,i.useMemo)(function(){return{type:x.z.SOURCE}},[]),f=(0,i.useMemo)(function(){return{type:x.z.TARGET}},[]),m=(0,i.useMemo)(function(){return{type:a.type,name:r==null?void 0:r.name,disabled:r==null?void 0:r.disabled,namePaths:[]}},[r==null?void 0:r.disabled,r==null?void 0:r.name,a.type]),h=(0,i.useMemo)(function(){return{type:f.type,name:u==null?void 0:u.name,disabled:u==null?void 0:u.disabled,namePaths:[]}},[u==null?void 0:u.disabled,u==null?void 0:u.name,f.type]);return r?(0,d.jsx)(U,{value:l,children:(0,d.jsxs)(F.Z,{gutter:8,children:[(0,d.jsx)(K.Z,{span:12,children:(0,d.jsx)(A,{value:m,children:(0,d.jsx)(U,{value:a,children:(0,d.jsx)(P.Z,v()(v()({},r),{},{children:u.children}))})})}),(0,d.jsx)(K.Z,{span:12,children:(0,d.jsx)(A,{value:h,children:(0,d.jsx)(U,{value:f,children:(0,d.jsx)(P.Z,v()({},u))})})})]})}):(0,d.jsx)(A,{value:h,children:(0,d.jsx)(P.Z,v()({},u))})};N.Item=re,N.List=Ke,N.ListItem=Le,N.ErrorList=P.Z.ErrorList,N.Info=be,N.useForm=P.Z.useForm,N.useFormInstance=P.Z.useFormInstance,N.useWatch=P.Z.useWatch,N.useDiformInfo=W},7481:function(b,D,o){"use strict";o.d(D,{Diform:function(){return C.y},DiformConfigProvider:function(){return M.z},DiformTypes:function(){return i.z}});var C=o(46640),v=o(84820),j=o.n(v);o.o(v,"DiformConfigProvider")&&o.d(D,{DiformConfigProvider:function(){return v.DiformConfigProvider}}),o.o(v,"DiformTypes")&&o.d(D,{DiformTypes:function(){return v.DiformTypes}}),o.o(v,"PassProps")&&o.d(D,{PassProps:function(){return v.PassProps}});var M=o(98030),i=o(77959)},98030:function(b,D,o){"use strict";o.d(D,{B:function(){return F},z:function(){return K}});var C=o(13769),v=o.n(C),j=o(67294),M=o(85893),i=["children"],F=(0,j.createContext)(null),K=function(E){var x=E.children,g=v()(E,i);return(0,M.jsx)(F.Provider,{value:g,children:x})}},77959:function(b,D,o){"use strict";o.d(D,{$:function(){return C},z:function(){return v}});var C={REMOVE:{code:"REMOVE",color:"#ff4d4f"},ADD:{code:"ADD",color:"#52c41a"},MODIFY:{code:"MODIFY",color:"#faad14"},EMPTY:{code:"EMPTY",color:"#d9d9d9"}},v=function(j){return j.SOURCE="_DIFORM_TYPE_SOURCE_",j.TARGET="_DIFORM_TYPE_TARGET_",j}({})},84820:function(){},63170:function(b,D,o){"use strict";o.d(D,{I:function(){return M}});var C=o(13769),v=o.n(C),j=["children"],M=function(F){var K=F.children,P=v()(F,j);return K(P)}},31081:function(b,D,o){"use strict";o.d(D,{Diform:function(){return C.Diform},DiformConfigProvider:function(){return C.DiformConfigProvider},DiformTypes:function(){return C.DiformTypes},PassProps:function(){return v.I}});var C=o(7481);o.o(C,"PassProps")&&o.d(D,{PassProps:function(){return C.PassProps}});var v=o(63170)}}]);
