(self.webpackChunkbello=self.webpackChunkbello||[]).push([[81],{47727:function(W,E,i){"use strict";i.d(E,{y:function(){return g}});var S=i(97857),f=i.n(S),N=i(13769),j=i.n(N),a=i(67294),y=i(93247),p=i(96486),D=i(77959);function O(s){return typeof s=="undefined"||s===null||s===""}function b(s,n){return O(s)&&O(n)?!0:(0,p.isEqual)(s,n)}var Y=function(n,e,t){if(O(n)&&!O(e))return t===D.z.SOURCE?D.$.EMPTY:D.$.REMOVE;if(!O(n)&&O(e))return t===D.z.SOURCE?D.$.REMOVE:D.$.ADD;if(!b(n,e))return D.$.MODIFY},ie=i(42056),v=i(85893),$=(0,a.createContext)({}),K=function(n){var e=n.children,t=n.value,u=(0,a.useContext)($),r=(0,a.useMemo)(function(){return Object.assign({},u,t)},[t,u]);return(0,v.jsx)($.Provider,{value:r,children:e})},G=(0,a.createContext)({}),T=function(n){var e=n.children,t=n.value,u=(0,a.useContext)(G),r=(0,a.useMemo)(function(){return Object.assign({},u,t)},[t,u]);return(0,v.jsx)(G.Provider,{value:r,children:e})},Ye=i(84820),se=i(64599),le=i.n(se),fe=i(19632),A=i.n(fe),ve=i(12444),ce=i.n(ve),de=i(72004),me=i.n(de),he=i(9783),H=i.n(he),Z=function(){function s(){ce()(this,s),H()(this,"state",{}),H()(this,"subscribers",[])}return me()(s,[{key:"setState",value:function(e){s.updateState(this.state,e)}},{key:"getSnapshots",value:function(){return this.state}},{key:"getSnapshot",value:function(e){var t=e.names,u=e.type;if(t&&u)return this.state[[u].concat(A()(t)).join(s.keySplit)]}},{key:"getUniqueFieldsSnapshots",value:function(e){var t=e.names,u=e.type,r=e.uniqueKey;if(t&&u&&r)return(0,p.pickBy)(this.state,function(o,l){return new RegExp("^".concat(s.join([s.join([u].concat(A()(t))),"\\d",s.join(r)]),"$")).test(l)})}},{key:"getChildSnapshots",value:function(e){var t=e.names,u=e.type;if(t&&u){var r=s.join([u].concat(A()(t)));return(0,p.pickBy)(this.state,function(o,l){return l.startsWith(r)})}}},{key:"emit",value:function(e){var t=s.join([e.type].concat(A()(e.names))),u=this.state[t];this.setState(e);var r=le()(this.subscribers),o;try{for(r.s();!(o=r.n()).done;){var l=o.value;l.onlyValue&&!e.remove&&u&&b(e.value,u.value)||(l.fuzzy&&t.startsWith(l.key)||l.uniqueKey&&new RegExp("^".concat(s.join([(0,p.escapeRegExp)(l.key),"\\d",(0,p.escapeRegExp)(s.join(l.uniqueKey))]),"$")).test(t)||t===l.key)&&l.callback(e)}}catch(c){r.e(c)}finally{r.f()}}},{key:"on",value:function(e,t){var u=this,r=[t.type].concat(A()(t.names)).join(s.keySplit),o=f()(f()({},t),{},{key:r,callback:e});return this.subscribers.push(o),function(){var l=u.subscribers.indexOf(o);l>-1&&u.subscribers.splice(l,1)}}}],[{key:"join",value:function(e){return e.join(s.keySplit)}},{key:"updateState",value:function(e,t){var u=[t.type].concat(A()(t.names)).join(s.keySplit);return t.remove?delete e[u]:e[u]=t,e}}]),s}();H()(Z,"keySplit","_DIFORM_STORE_KEY_SPLIT_");var P=function(){return(0,a.useContext)($)},J=function(){var n=P(),e=n.type;return e===D.z.SOURCE?D.z.TARGET:D.z.SOURCE},xe=function(n){var e=(0,a.useRef)(n);return e.current=n,(0,a.useCallback)(function(){return e.current.apply(e,arguments)},[])},ye=function(n){var e=(0,a.useRef)(),t=(0,a.useRef)(n);return t.current!==n&&(e.current=t.current,t.current=n),e.current},Q=function(n,e){var t=(0,a.useRef)(),u=ye(e);return(typeof e=="undefined"||!(0,p.isEqual)(u,e))&&(t.current=n()),t.current},X=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var u=e[0],r=e.slice(1),o=xe(u);return Q(function(){return p.debounce.apply(void 0,[o].concat(A()(r)))},[r])},w=function(){var n=P(),e=n.statusInfo,t=n.firstStatus;return(0,a.useMemo)(function(){return t?e:null},[t,e])},De=i(91269),ee={"zh-cn":{ADD:"\u65B0\u589E",REMOVE:"\u5220\u9664",MODIFY:"\u4FEE\u6539",EMPTY:"\u7A7A"},en:{ADD:"New",REMOVE:"Remove",MODIFY:"Modified",EMPTY:"Empty"}},z=function(){return(0,a.useContext)(ie.B)},Ce=function(){var n,e,t=(0,a.useContext)(De.ZP.ConfigContext),u=z(),r=(n=(e=t.locale)===null||e===void 0?void 0:e.locale)!==null&&n!==void 0?n:"en";return(0,a.useCallback)(function(o){var l,c,d=u==null?void 0:u.locale,h=(l=ee[r])!==null&&l!==void 0?l:ee.en,m=Object.assign({},h,d);return(c=m[o])!==null&&c!==void 0?c:o},[r,u==null?void 0:u.locale])},te=function(){var n=Ce(),e=z();return(0,a.useCallback)(function(t){if(t){var u,r;return f()(f()({},t),{},{text:n(t.code),color:(u=e==null||(r=e.color)===null||r===void 0?void 0:r[t.code])!==null&&u!==void 0?u:t.color})}},[e==null?void 0:e.color,n])},B=function(){return(0,a.useContext)(G)},V=function(n){return Q(function(){if(typeof n!="undefined")return Array.isArray(n)?n.length?n:void 0:[n]},[n])},Pe=i(5574),_=i.n(Pe),U=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Q(function(){if(!e.some(function(r){return typeof r=="undefined"})){var u=p.concat.apply(void 0,e);return u.length?u:void 0}},[e])},Ee=function(n){var e=V(n),t=P(),u=t.fullNamePath;return U(u,e)},ne=function(n){var e=V(n),t=P(),u=t.anotherFieldName,r=t.uniqueKey;return(0,a.useMemo)(function(){return r&&typeof u=="number"&&typeof(e==null?void 0:e[0])=="number"?[u].concat(A()(e.slice(1))):e},[u,e,r])},q=function(n,e){var t=P(),u=t.store,r=(0,a.useState)(function(){return u==null?void 0:u.getSnapshot({type:n,names:e})}),o=_()(r,2),l=o[0],c=o[1],d=X(function(h){c(h)},300);return(0,a.useEffect)(function(){if(e&&n&&u){d(u.getSnapshot({type:n,names:e}));var h=u.on(function(m){d(m.remove?void 0:m)},{names:e,type:n,onlyValue:!0});return function(){h(),d.cancel()}}},[n,e,u,d]),l},$e=function(n){var e=useDiformContext(),t=e.type,u=useNextNames(n);return q(t,u)},Se=function(n){var e=P(),t=e.anotherFullNamePath,u=J(),r=ne(n),o=U(t,r);return q(u,o)},pe=function(n){var e=P(),t=e.type,u=e.fullNamePath,r=e.uniqueKey,o=U(u,n,r);return q(t,o)},Me=function(){var n=P(),e=n.store,t=n.anotherFullNamePath,u=n.uniqueKey,r=J(),o=(0,a.useState)(function(){return e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:r,uniqueKey:u})}),l=_()(o,2),c=l[0],d=l[1],h=(0,a.useRef)(c),m=X(function(){d(h.current)},300);return(0,a.useEffect)(function(){if(t&&r&&e&&u){h.current=e.getUniqueFieldsSnapshots({names:t,type:r,uniqueKey:u}),m();var C=e.on(function(x){h.current=h.current?Z.updateState(f()({},h.current),x):e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:r,uniqueKey:u}),m()},{names:t,type:r,uniqueKey:u,onlyValue:!0});return function(){C(),m.cancel()}}},[t,m,e,r,u]),c},Ie=function(n){var e=P(),t=e.store,u=e.anotherFullNamePath,r=U(u,n),o=J(),l=(0,a.useRef)((0,a.useMemo)(function(){return t==null?void 0:t.getChildSnapshots({names:r,type:o})},[])),c=(0,a.useState)(!(0,p.isEmpty)(l.current)),d=_()(c,2),h=d[0],m=d[1],C=X(function(){m(!(0,p.isEmpty)(l.current))},300);return(0,a.useEffect)(function(){if(r&&o&&t){l.current=t.getChildSnapshots({type:o,names:r}),C();var x=t.on(function(I){l.current=l.current?Z.updateState(f()({},l.current),I):t==null?void 0:t.getChildSnapshots({names:r,type:o}),C()},{names:r,type:o,onlyValue:!0,fuzzy:!0});return function(){x(),C.cancel()}}},[o,r,t,C]),h},je=function(n){var e=P(),t=e.uniqueKey,u=e.anotherFullNamePath,r=Me(),o=pe(n),l=Ie(n);return(0,a.useMemo)(function(){if(t&&r&&o&&u){var c;return(c=(0,p.values)(r).find(function(d){return b(d.value,o.value)}))===null||c===void 0?void 0:c.names[u.length]}return l?n:void 0},[t,r,o,u,l,n])},ge=i(93967),Ne=i.n(ge),re=function(n){var e=n.className,t=n.style,u=n.children,r=w();return(0,v.jsxs)("div",{className:Ne()(e,{"bello-diform-mark":r}),style:f()({borderColor:r==null?void 0:r.color},t),children:[r?(0,v.jsxs)("div",{className:"bello-diform-mark-divider",children:[(0,v.jsx)("span",{style:{borderColor:r.color}}),(0,v.jsx)("span",{style:{color:r.color},children:r==null?void 0:r.text}),(0,v.jsx)("span",{style:{borderColor:r.color}})]}):null,u]})},Oe=["children","name","noStatus"],Re=["children","noStatus"],Fe=function(n){var e=n.children,t=n.name,u=n.noStatus,r=j()(n,Oe),o=P(),l=o.type,c=o.store,d=o.statusInfo,h=o.firstStatus,m=Se(t),C=te(),x=z(),I=Ee(t),L=(0,a.useRef)(c);L.current=c;var R=(0,a.useMemo)(function(){if(l){var M=r.value,k=m==null?void 0:m.value;return C(Y(M,k,l))}},[m==null?void 0:m.value,r.value,l,C]),F=(0,a.useMemo)(function(){return{statusInfo:R!=null?R:d,firstStatus:!h&&!d&&!!R}},[h,R,d]),ae=(0,a.useMemo)(function(){return f()(f()({},r),{},{diffstatus:F.firstStatus?F.statusInfo:void 0})},[r,F.statusInfo,F.firstStatus]),Ve=(0,a.useMemo)(function(){var M;return(M=x==null?void 0:x.wrapper)!==null&&M!==void 0?M:re},[x==null?void 0:x.wrapper]);return(0,a.useEffect)(function(){if(I&&l){var M,k=r.value;(M=L.current)===null||M===void 0||M.emit({type:l,names:I,value:k,statusInfo:R})}},[r.value,I,R,l]),(0,a.useEffect)(function(){if(l&&I)return function(){var M;return(M=L.current)===null||M===void 0?void 0:M.emit({type:l,names:I,remove:!0})}},[I,l]),(0,v.jsx)(K,{value:F,children:u?(0,a.cloneElement)(e,ae):(0,v.jsx)(Ve,{children:(0,a.cloneElement)(e,ae)})})},ue=function(n){var e=n.children,t=n.noStatus,u=j()(n,Re),r=P(),o=V(n.name);return typeof r.type!="undefined"&&o&&(0,a.isValidElement)(e)?(0,v.jsx)(y.Z.Item,f()(f()({},u),{},{children:(0,v.jsx)(Fe,{name:u.name,noStatus:u.noStyle||t,children:e})})):(0,v.jsx)(y.Z.Item,f()(f()({},u),{},{children:e}))};ue.useStatus=y.Z.Item.useStatus;var Ae=["uniqueKey"],Te=["uniqueKey"],Ke=function(n){var e=n.uniqueKey,t=j()(n,Ae),u=P(),r=u.anotherFullNamePath,o=B(),l=o.namePaths,c=ne(t.name),d=U(r,c),h=V(e),m=(0,a.useMemo)(function(){return{fullNamePath:l,anotherFullNamePath:d,uniqueKey:h}},[l,d,h]);return(0,v.jsx)(K,{value:m,children:(0,v.jsx)(y.Z.List,f()({},t))})},Ue=function(n){var e=n.uniqueKey,t=j()(n,Te),u=P(),r=B(),o=r.namePaths,l=U(o,n.name),c=(0,a.useMemo)(function(){return{namePaths:l}},[l]);return typeof u.type!="undefined"?(0,v.jsx)(T,{value:c,children:(0,v.jsx)(Ke,f()(f()({},t),{},{uniqueKey:e}))}):(0,v.jsx)(T,{value:c,children:(0,v.jsx)(y.Z.List,f()({},t))})},Le=function(n){var e=n.children,t=n.noStatus,u=B(),r=u.fieldName,o=je(r),l=P(),c=l.statusInfo,d=l.type,h=l.firstStatus,m=te(),C=z(),x=(0,a.useMemo)(function(){if(c)return c;if(typeof o!="number")return d===D.z.SOURCE?m(D.$.REMOVE):m(D.$.ADD)},[o,c,d,m]),I=(0,a.useMemo)(function(){return{fieldName:r,anotherFieldName:o,statusInfo:x,firstStatus:!h&&!c&&!!x}},[r,h,o,x,c]),L=(0,a.useMemo)(function(){return(0,a.isValidElement)(e)?(0,a.cloneElement)(e,{diffstatus:I.statusInfo}):e},[e,I.statusInfo]),R=(0,a.useMemo)(function(){var F;return(F=C==null?void 0:C.wrapper)!==null&&F!==void 0?F:re},[C==null?void 0:C.wrapper]);return(0,v.jsx)(K,{value:I,children:t?L:(0,v.jsx)(R,{children:L})})},We=function(n){var e=P(),t=(0,a.useMemo)(function(){return{fieldName:n.fieldName}},[n.fieldName]);return typeof e.type!="undefined"?(0,v.jsx)(T,{value:t,children:(0,v.jsx)(Le,f()({},n))}):(0,v.jsx)(T,{value:t,children:n.children})},be=function(n){var e=n.children,t=B();return e(t)},ze=i(71230),oe=i(15746),Be=function(n){var e=n.source,t=n.target;return(0,v.jsxs)(ze.Z,{gutter:8,children:[(0,v.jsx)(oe.Z,{span:12,children:e}),(0,v.jsx)(oe.Z,{span:12,children:t})]})},Ze=["diff"],g=function(n){var e=n.diff,t=j()(n,Ze),u=z(),r=(0,a.useMemo)(function(){var x={layout:t.layout,component:t.component,name:"source"};if(e===!0)return x;if(e)return f()(f()({},x),e)},[e,t.layout,t.component]),o=(0,a.useMemo)(function(){return f()({name:r?"target":void 0},t)},[t,r]),l=(0,a.useMemo)(function(){return{store:new Z,fullNamePath:[],anotherFullNamePath:[]}},[]),c=(0,a.useMemo)(function(){return{type:D.z.SOURCE}},[]),d=(0,a.useMemo)(function(){return{type:D.z.TARGET}},[]),h=(0,a.useMemo)(function(){return{type:c.type,name:r==null?void 0:r.name,disabled:r==null?void 0:r.disabled,namePaths:[]}},[r==null?void 0:r.disabled,r==null?void 0:r.name,c.type]),m=(0,a.useMemo)(function(){return{type:d.type,name:o==null?void 0:o.name,disabled:o==null?void 0:o.disabled,namePaths:[]}},[o==null?void 0:o.disabled,o==null?void 0:o.name,d.type]),C=(0,a.useMemo)(function(){var x;return(x=u==null?void 0:u.component)!==null&&x!==void 0?x:Be},[u==null?void 0:u.component]);return r?(0,v.jsx)(K,{value:l,children:(0,v.jsx)(C,{source:(0,v.jsx)(T,{value:h,children:(0,v.jsx)(K,{value:c,children:(0,v.jsx)(y.Z,f()(f()({},r),{},{children:o.children}))})}),target:(0,v.jsx)(T,{value:m,children:(0,v.jsx)(K,{value:d,children:(0,v.jsx)(y.Z,f()({},o))})})})}):(0,v.jsx)(T,{value:m,children:(0,v.jsx)(y.Z,f()({},o))})};g.Item=ue,g.List=Ue,g.ListItem=We,g.ErrorList=y.Z.ErrorList,g.Info=be,g.useForm=y.Z.useForm,g.useFormInstance=y.Z.useFormInstance,g.useWatch=y.Z.useWatch,g.useDiformInfo=B,g.useDiformStatus=w},7481:function(W,E,i){"use strict";i.d(E,{Diform:function(){return S.y},DiformConfigProvider:function(){return j.z},DiformTypes:function(){return a.z}});var S=i(47727),f=i(84820),N=i.n(f);i.o(f,"DiformConfigProvider")&&i.d(E,{DiformConfigProvider:function(){return f.DiformConfigProvider}}),i.o(f,"DiformTypes")&&i.d(E,{DiformTypes:function(){return f.DiformTypes}}),i.o(f,"PassProps")&&i.d(E,{PassProps:function(){return f.PassProps}});var j=i(42056),a=i(77959)},42056:function(W,E,i){"use strict";i.d(E,{B:function(){return y},z:function(){return p}});var S=i(13769),f=i.n(S),N=i(67294),j=i(85893),a=["children"],y=(0,N.createContext)(null),p=function(O){var b=O.children,Y=f()(O,a);return(0,j.jsx)(y.Provider,{value:Y,children:b})}},77959:function(W,E,i){"use strict";i.d(E,{$:function(){return S},z:function(){return f}});var S={REMOVE:{code:"REMOVE",color:"#ff4d4f"},ADD:{code:"ADD",color:"#52c41a"},MODIFY:{code:"MODIFY",color:"#faad14"},EMPTY:{code:"EMPTY",color:"#d9d9d9"}},f=function(N){return N.SOURCE="_DIFORM_TYPE_SOURCE_",N.TARGET="_DIFORM_TYPE_TARGET_",N}({})},84820:function(){},63170:function(W,E,i){"use strict";i.d(E,{I:function(){return j}});var S=i(13769),f=i.n(S),N=["children"],j=function(y){var p=y.children,D=f()(y,N);return p(D)}},31081:function(W,E,i){"use strict";i.d(E,{Diform:function(){return S.Diform},DiformConfigProvider:function(){return S.DiformConfigProvider},DiformTypes:function(){return S.DiformTypes},PassProps:function(){return f.I}});var S=i(7481);i.o(S,"PassProps")&&i.d(E,{PassProps:function(){return S.PassProps}});var f=i(63170)}}]);
