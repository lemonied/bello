"use strict";(self.webpackChunkbello=self.webpackChunkbello||[]).push([[625],{2625:function(nn,ue,c){c.d(ue,{iP:function(){return g},HK:function(){return se},_Q:function(){return I},Ix:function(){return Xe}});var ae=c(97857),x=c.n(ae),oe=c(13769),M=c.n(oe),i=c(67294),S=c(93247);function O(o){return typeof o=="undefined"||o===null||o===""||Array.isArray(o)&&o.length===0}var f=c(85893),ie=["children"],q=(0,i.createContext)(null),se=function(n){var e=n.children,t=M()(n,ie),r=(0,i.useContext)(q),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,f.jsx)(q.Provider,{value:u,children:e})},fe=c(9783),R=c.n(fe),P=function(o){return o.REMOVE="REMOVE",o.ADD="ADD",o.MODIFY="MODIFY",o.EMPTY="EMPTY",o}({}),I=function(o){return o.SOURCE="_DIFF_FORM_TYPE_SOURCE_",o.TARGET="_DIFF_FORM_TYPE_TARGET_",o}({}),k={"zh-cn":{ADD:"\u65B0\u589E",REMOVE:"\u5220\u9664",MODIFY:"\u4FEE\u6539",EMPTY:"\u7A7A"},en:{ADD:"New",REMOVE:"Remove",MODIFY:"Modified",EMPTY:"Empty"}},le=R()(R()(R()(R()({},P.REMOVE,"#ff4d4f"),P.ADD,"#52c41a"),P.MODIFY,"#faad14"),P.EMPTY,"#d9d9d9"),V=(0,i.createContext)({}),b=function(n){var e=n.children,t=n.value,r=(0,i.useContext)(V),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,f.jsx)(V.Provider,{value:u,children:e})},z=(0,i.createContext)({}),A=function(n){var e=n.children,t=n.value,r=(0,i.useContext)(z),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,f.jsx)(z.Provider,{value:u,children:e})},ve=c(64599),ce=c.n(ve),de=c(19632),E=c.n(de),me=c(12444),he=c.n(me),xe=c(72004),ye=c.n(xe),p=c(96486),Z=function(){function o(){he()(this,o),R()(this,"state",{}),R()(this,"subscribers",[])}return ye()(o,[{key:"setState",value:function(e){o.updateState(this.state,e)}},{key:"getSnapshots",value:function(){return this.state}},{key:"getSnapshot",value:function(e){var t=e.names,r=e.type;if(t&&r)return this.state[o.join([r].concat(E()(t)))]}},{key:"getUniqueFieldsSnapshots",value:function(e){var t=e.names,r=e.type,u=e.uniqueKey;if(t&&r&&u){var a=(0,p.pickBy)(this.state,function(s,l){return new RegExp("^".concat(o.join([o.join([r].concat(E()(t))),"\\d",o.join(u)]),"$")).test(l)});return(0,p.isEmpty)(a)?void 0:a}}},{key:"getChildSnapshots",value:function(e){var t=e.names,r=e.type;if(t&&r){var u=o.join([r].concat(E()(t))),a=(0,p.pickBy)(this.state,function(s,l){return l.startsWith(u)});return(0,p.isEmpty)(a)?void 0:a}}},{key:"emit",value:function(e){var t=o.join([e.type].concat(E()(e.names)));this.setState(e);var r=ce()(this.subscribers),u;try{for(r.s();!(u=r.n()).done;){var a=u.value;(a.fuzzy&&t.startsWith(a.key)||a.uniqueKey&&new RegExp("^".concat(o.join([(0,p.escapeRegExp)(a.key),"\\d",(0,p.escapeRegExp)(o.join(a.uniqueKey))]),"$")).test(t)||t===a.key)&&a.callback(e)}}catch(s){r.e(s)}finally{r.f()}}},{key:"on",value:function(e,t){var r=this,u=o.join([t.type].concat(E()(t.names))),a=x()(x()({},t),{},{key:u,callback:e});return this.subscribers.push(a),function(){var s=r.subscribers.indexOf(a);s>-1&&r.subscribers.splice(s,1)}}}],[{key:"join",value:function(e){return e.join(o.keySplit)}},{key:"updateState",value:function(e,t){var r=o.join([t.type].concat(E()(t.names)));return t.remove?delete e[r]:e[r]=t,e}}]),o}();R()(Z,"keySplit","_DIFF_FORM_STORE_KEY_SPLIT_");var D=function(){return(0,i.useContext)(V)},W=function(){var n=D(),e=n.type;return e===I.SOURCE?I.TARGET:I.SOURCE},pe=function(n){var e=(0,i.useRef)(n);return e.current=n,(0,i.useCallback)(function(){return e.current.apply(e,arguments)},[])},Fe=function(n){var e=(0,i.useRef)(),t=(0,i.useRef)(n);return t.current!==n&&(e.current=t.current,t.current=n),e.current},G=function(n,e){var t=(0,i.useRef)(),r=Fe(e);return(typeof e=="undefined"||!(0,p.isEqual)(r,e))&&(t.current=n()),t.current},H=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=e[0],u=e.slice(1),a=pe(r);return G(function(){return p.debounce.apply(void 0,[a].concat(E()(u)))},[u])},De=c(5574),Y=c.n(De),B=function(){var n=D(),e=n.statusInfo,t=n.firstStatus,r=(0,i.useState)(!1),u=Y()(r,2),a=u[0],s=u[1];(0,i.useEffect)(function(){var v=setTimeout(function(){return s(!0)},350);return function(){return clearTimeout(v)}},[]);var l=(0,i.useMemo)(function(){return t?e:void 0},[t,e]);return a?l:void 0},Ce=c(91269),U=function(){return(0,i.useContext)(q)},Se=function(){var n,e,t=(0,i.useContext)(Ce.ZP.ConfigContext),r=U(),u=(n=(e=t.locale)===null||e===void 0?void 0:e.locale)!==null&&n!==void 0?n:"en";return(0,i.useCallback)(function(a){var s,l,v=r==null?void 0:r.locale,m=(s=k[u])!==null&&s!==void 0?s:k.en,d=Object.assign({},m,v);return(l=d[a])!==null&&l!==void 0?l:a},[u,r==null?void 0:r.locale])},Q=function(){var n=Se(),e=U();return(0,i.useCallback)(function(t){if(t){var r,u;return{code:t,text:n(t),color:(r=e==null||(u=e.color)===null||u===void 0?void 0:u[t])!==null&&r!==void 0?r:le[t]}}},[e==null?void 0:e.color,n])},L=function(){return(0,i.useContext)(z)},ge=c(43589),K=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return G(function(){if(!e.some(function(u){return typeof u=="undefined"})){var r=p.concat.apply(void 0,e);return r.length?r:void 0}},[e])},J=function(){var n=(0,i.useContext)(ge.zb),e=n.prefixName;return(0,i.useMemo)(function(){return e||[]},[e])},$=function(n){return G(function(){if(typeof n!="undefined")return Array.isArray(n)?n.length?n:void 0:[n]},[n])},Pe=function(n){var e=J(),t=L(),r=t.namePaths,u=$(n),a=(0,i.useMemo)(function(){if(r)return e.slice(r.length)},[e,r]);return K(a,u)},X=function(n){var e=$(n),t=J();return K(t,e)},w=function(n){var e=Pe(n),t=D(),r=t.anotherFieldName,u=t.uniqueKey;return(0,i.useMemo)(function(){return u&&typeof r=="number"&&typeof(e==null?void 0:e[0])=="number"?[r].concat(E()(e.slice(1))):e},[r,e,u])},_=function(n,e){var t=D(),r=t.store,u=(0,i.useState)(function(){return r==null?void 0:r.getSnapshot({type:n,names:e})}),a=Y()(u,2),s=a[0],l=a[1],v=(0,i.useRef)(s),m=H(function(){l(v.current)},300);return(0,i.useEffect)(function(){if(e&&n&&r){v.current=r.getSnapshot({type:n,names:e}),m(),m.flush();var d=r.on(function(h){var y=v.current;v.current=h.remove?void 0:h,m(),y!==v.current&&((0,p.isUndefined)(y)||(0,p.isUndefined)(v.current))&&m.flush()},{names:e,type:n});return function(){d(),m.cancel()}}},[n,e,r,m]),s},Ie=function(n){var e=D(),t=e.anotherFullNamePath,r=W(),u=w(n),a=K(t,u);return _(r,a)},Ne=function(n){var e=D(),t=e.type,r=e.fullNamePath,u=e.uniqueKey,a=K(r,n,u);return _(t,a)},je=function(){var n=D(),e=n.store,t=n.anotherFullNamePath,r=n.uniqueKey,u=W(),a=(0,i.useState)(function(){return e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r})}),s=Y()(a,2),l=s[0],v=s[1],m=(0,i.useRef)(l),d=H(function(){v(m.current)},300);return(0,i.useEffect)(function(){if(t&&u&&e&&r){m.current=e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),d(),d.flush();var h=e.on(function(y){var C=m.current;m.current=C?Z.updateState(x()({},C),y):e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),d(),(0,p.values)(C).length!==(0,p.values)(m.current).length&&d.flush()},{names:t,type:u,uniqueKey:r});return function(){h(),d.cancel()}}},[t,d,e,u,r]),l},Ee=function(n){var e=D(),t=e.store,r=e.anotherFullNamePath,u=K(r,n),a=W(),s=(0,i.useRef)((0,i.useMemo)(function(){return t==null?void 0:t.getChildSnapshots({names:u,type:a})},[])),l=(0,i.useState)(!(0,p.isEmpty)(s.current)),v=Y()(l,2),m=v[0],d=v[1],h=H(function(){d(!!s.current)},300);return(0,i.useEffect)(function(){if(u&&a&&t){s.current=t.getChildSnapshots({type:a,names:u}),h(),h.flush();var y=t.on(function(C){var N=s.current;s.current=N?Z.updateState(x()({},N),C):t==null?void 0:t.getChildSnapshots({names:u,type:a}),h(),(0,p.values)(N).length!==(0,p.values)(s.current).length&&h.flush()},{names:u,type:a,fuzzy:!0});return function(){y(),h.cancel()}}},[a,u,t,h]),m},Me=function(n){var e=D(),t=e.uniqueKey,r=e.anotherFullNamePath,u=je(),a=Ne(n),s=Ee(n);return(0,i.useMemo)(function(){if(t&&u&&a&&r){var l;return(l=(0,p.values)(u).find(function(v){return(0,p.isEqual)(v.value,a.value)}))===null||l===void 0?void 0:l.names[r.length]}return s?n:void 0},[t,u,a,r,s,n])},Re=c(68400),Ae=c.n(Re),Oe=c(97653),be=c(93967),Ke=c.n(be),ee,Te=Oe.ZP.div(ee||(ee=Ae()([`
  &.diff-form-mark{
    padding: 8px;
    border-style: dashed;
    border-top: none;
    border-left-width: 1px;
    border-bottom-width: 1px;
    border-right-width: 1px;
    border-color: `,`;
    position: relative;

    .diff-form-mark-divider{
      position: absolute;
      bottom: 100%;
      width: 100%;
      left: 0;
      transform: translate(0, 50%);
      display: flex;
      align-items: center;

      & > span{
        font-size: 12px;
        color: `,`;

        &:first-child{
          flex: 0 0 25%;
        }

        &:last-child {
          flex: 1;
        }

        &:first-child, &:last-child{
          border-top-width: 1px;
          border-top-style: dashed;
          border-color: `,`;
        }
      }
    }
  }
`])),function(o){var n;return(n=o.$status)===null||n===void 0?void 0:n.color},function(o){var n;return(n=o.$status)===null||n===void 0?void 0:n.color},function(o){var n;return(n=o.$status)===null||n===void 0?void 0:n.color}),ne=function(n){var e=n.className,t=n.style,r=n.children,u=B();return(0,f.jsxs)(Te,{className:Ke()(e,{"diff-form-mark":u}),style:t,$status:u,children:[u?(0,f.jsxs)("div",{className:"diff-form-mark-divider",children:[(0,f.jsx)("span",{}),(0,f.jsx)("span",{children:u==null?void 0:u.text}),(0,f.jsx)("span",{})]}):null,r]})},Ue=["children","name","noStatus"],Le=["children","noStatus"],Ze=function(n){var e=n.children,t=n.name,r=n.noStatus,u=M()(n,Ue),a=D(),s=a.type,l=a.store,v=a.statusInfo,m=a.firstStatus,d=U(),h=Ie(t),y=Q(),C=X(t),N=(0,i.useRef)(l);N.current=l;var j=(0,i.useMemo)(function(){if(s){var F=u.value,T=h==null?void 0:h.value,en=function(){if(O(F)&&!O(T))return s===I.SOURCE?P.EMPTY:P.REMOVE;if(!O(F)&&O(T))return s===I.SOURCE?P.REMOVE:P.ADD;if(!O(F)&&!O(T)&&!(0,p.isEqual)(F,T))return P.MODIFY}();return y(en)}},[h==null?void 0:h.value,u.value,s,y]),we=(0,i.useMemo)(function(){return{statusInfo:j!=null?j:v,firstStatus:!m&&!v&&!!j}},[m,j,v]),_e=(0,i.useMemo)(function(){var F;return(F=d==null?void 0:d.wrapper)!==null&&F!==void 0?F:ne},[d==null?void 0:d.wrapper]);return(0,i.useEffect)(function(){if(C&&s){var F,T=u.value;(F=N.current)===null||F===void 0||F.emit({type:s,names:C,value:T})}},[u.value,C,s]),(0,i.useEffect)(function(){if(s&&C)return function(){var F;return(F=N.current)===null||F===void 0?void 0:F.emit({type:s,names:C,remove:!0})}},[C,s]),(0,f.jsx)(b,{value:we,children:r?(0,i.cloneElement)(e,u):(0,f.jsx)(_e,{children:(0,i.cloneElement)(e,u)})})},te=function(n){var e=n.children,t=n.noStatus,r=M()(n,Le),u=D(),a=$(n.name);return typeof u.type!="undefined"&&a&&(0,i.isValidElement)(e)?(0,f.jsx)(S.Z.Item,x()(x()({},r),{},{children:(0,f.jsx)(Ze,{name:r.name,noStatus:r.noStyle||t,children:e})})):(0,f.jsx)(S.Z.Item,x()(x()({},r),{},{children:e}))};te.useStatus=S.Z.Item.useStatus;var Ye=["uniqueKey"],$e=["uniqueKey"],qe=function(n){var e=n.uniqueKey,t=M()(n,Ye),r=D(),u=r.anotherFullNamePath,a=L(),s=a.namePaths,l=w(t.name),v=K(u,l),m=$(e),d=(0,i.useMemo)(function(){return{fullNamePath:s,anotherFullNamePath:v,uniqueKey:m}},[s,v,m]);return(0,f.jsx)(b,{value:d,children:(0,f.jsx)(S.Z.List,x()({},t))})},Ve=function(n){var e=n.uniqueKey,t=M()(n,$e),r=D(),u=X(t.name),a=(0,i.useMemo)(function(){return{namePaths:u,fieldName:void 0}},[u]);return typeof r.type!="undefined"?(0,f.jsx)(A,{value:a,children:(0,f.jsx)(qe,x()(x()({},t),{},{uniqueKey:e}))}):(0,f.jsx)(A,{value:a,children:(0,f.jsx)(S.Z.List,x()({},t))})},ze=function(n){var e=n.children,t=n.noStatus,r=L(),u=r.fieldName,a=Me(u),s=D(),l=s.statusInfo,v=s.type,m=s.firstStatus,d=Q(),h=U(),y=(0,i.useMemo)(function(){if(l)return l;if(typeof a!="number")return v===I.SOURCE?d(P.REMOVE):d(P.ADD)},[a,l,v,d]),C=(0,i.useMemo)(function(){return{fieldName:u,anotherFieldName:a,statusInfo:y,firstStatus:!m&&!l&&!!y}},[u,m,a,y,l]),N=(0,i.useMemo)(function(){var j;return(j=h==null?void 0:h.wrapper)!==null&&j!==void 0?j:ne},[h==null?void 0:h.wrapper]);return(0,f.jsx)(b,{value:C,children:t?e:(0,f.jsx)(N,{children:e})})},We=function(n){var e=D(),t=(0,i.useMemo)(function(){return{fieldName:n.fieldName}},[n.fieldName]);return typeof e.type!="undefined"?(0,f.jsx)(A,{value:t,children:(0,f.jsx)(ze,x()({},n))}):(0,f.jsx)(A,{value:t,children:n.children})},Ge=function(n){var e=n.children,t=L();return e(t)},He=c(71230),re=c(15746),Be=function(n){var e=n.source,t=n.target;return(0,f.jsxs)(He.Z,{gutter:[8,8],children:[(0,f.jsx)(re.Z,{span:24,lg:12,children:e}),(0,f.jsx)(re.Z,{span:24,lg:12,children:t})]})},ke=function(n){var e=n.children,t=B();return e(t)},Qe=["diff"],g=function(n){var e=n.diff,t=M()(n,Qe),r=U(),u=(0,i.useMemo)(function(){var y={layout:t.layout,component:t.component,name:"source"};if(e===!0)return y;if(e)return x()(x()({},y),e)},[e,t.layout,t.component]),a=(0,i.useMemo)(function(){return x()({name:u?"target":void 0},t)},[t,u]),s=(0,i.useMemo)(function(){return{store:new Z,fullNamePath:[],anotherFullNamePath:[]}},[]),l=(0,i.useMemo)(function(){return{type:I.SOURCE}},[]),v=(0,i.useMemo)(function(){return{type:I.TARGET}},[]),m=(0,i.useMemo)(function(){return{type:l.type,name:u==null?void 0:u.name,disabled:u==null?void 0:u.disabled,namePaths:[]}},[u==null?void 0:u.disabled,u==null?void 0:u.name,l.type]),d=(0,i.useMemo)(function(){return{type:v.type,name:a==null?void 0:a.name,disabled:a==null?void 0:a.disabled,namePaths:[]}},[a==null?void 0:a.disabled,a==null?void 0:a.name,v.type]),h=(0,i.useMemo)(function(){var y;return(y=r==null?void 0:r.component)!==null&&y!==void 0?y:Be},[r==null?void 0:r.component]);return u?(0,f.jsx)(b,{value:s,children:(0,f.jsx)(h,{source:(0,f.jsx)(A,{value:m,children:(0,f.jsx)(b,{value:l,children:(0,f.jsx)(S.Z,x()(x()({},u),{},{children:a.children}))})}),target:(0,f.jsx)(A,{value:d,children:(0,f.jsx)(b,{value:v,children:(0,f.jsx)(S.Z,x()({},a))})})})}):(0,f.jsx)(A,{value:d,children:(0,f.jsx)(S.Z,x()({},a))})};g.Item=te,g.List=Ve,g.ListItem=We,g.ErrorList=S.Z.ErrorList,g.Info=Ge,g.DiffStatus=ke,g.useForm=S.Z.useForm,g.useFormInstance=S.Z.useFormInstance,g.useWatch=S.Z.useWatch,g.useDiffFormInfo=L,g.useDiffFormStatus=B;var Je=["children"],Xe=function(n){var e=n.children,t=M()(n,Je);return e(t)}}}]);
