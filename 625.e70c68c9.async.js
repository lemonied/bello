"use strict";(self.webpackChunkbello=self.webpackChunkbello||[]).push([[625],{2625:function(nn,X,c){c.r(X),c.d(X,{DiffForm:function(){return P},DiffFormConfigContext:function(){return Y},DiffFormConfigProvider:function(){return fe},DiffFormTypes:function(){return I},PassProps:function(){return Xe},StatusCode:function(){return g}});var ae=c(97857),y=c.n(ae),oe=c(13769),M=c.n(oe),i=c(67294),S=c(22150);function O(a){return typeof a=="undefined"||a===null||a===""||Array.isArray(a)&&a.length===0}var s=c(85893),ie=["children"],Y=(0,i.createContext)(null),fe=function(n){var e=n.children,t=M()(n,ie),r=(0,i.useContext)(Y),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,s.jsx)(Y.Provider,{value:u,children:e})},se=c(9783),R=c.n(se),g=function(a){return a.REMOVE="REMOVE",a.ADD="ADD",a.MODIFY="MODIFY",a.EMPTY="EMPTY",a}({}),I=function(a){return a.SOURCE="_DIFF_FORM_TYPE_SOURCE_",a.TARGET="_DIFF_FORM_TYPE_TARGET_",a}({}),w={"zh-cn":{ADD:"\u65B0\u589E",REMOVE:"\u5220\u9664",MODIFY:"\u4FEE\u6539",EMPTY:"\u7A7A"},en:{ADD:"New",REMOVE:"Remove",MODIFY:"Modified",EMPTY:"Empty"}},le=R()(R()(R()(R()({},g.REMOVE,"#ff4d4f"),g.ADD,"#52c41a"),g.MODIFY,"#faad14"),g.EMPTY,"#d9d9d9"),W=(0,i.createContext)({}),b=function(n){var e=n.children,t=n.value,r=(0,i.useContext)(W),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,s.jsx)(W.Provider,{value:u,children:e})},z=(0,i.createContext)({}),E=function(n){var e=n.children,t=n.value,r=(0,i.useContext)(z),u=(0,i.useMemo)(function(){return Object.assign({},r,t)},[t,r]);return(0,s.jsx)(z.Provider,{value:u,children:e})},ve=c(64599),ce=c.n(ve),de=c(19632),N=c.n(de),me=c(12444),he=c.n(me),xe=c(72004),ye=c.n(xe),x=c(96486),$=function(){function a(){he()(this,a),R()(this,"state",{}),R()(this,"subscribers",[])}return ye()(a,[{key:"setState",value:function(e){a.updateState(this.state,e)}},{key:"getSnapshots",value:function(){return this.state}},{key:"getSnapshot",value:function(e){var t=e.names,r=e.type;if(t&&r)return this.state[a.join([r].concat(N()(t)))]}},{key:"getUniqueFieldsSnapshots",value:function(e){var t=e.names,r=e.type,u=e.uniqueKey;if(t&&r&&u){var o=(0,x.pickBy)(this.state,function(f,l){return new RegExp("^".concat(a.join([(0,x.escapeRegExp)(a.join([r].concat(N()(t)))),"\\d+",(0,x.escapeRegExp)(a.join(u))]),"$")).test(l)});return(0,x.isEmpty)(o)?void 0:o}}},{key:"getChildSnapshots",value:function(e){var t=e.names,r=e.type;if(t&&r){var u=a.join([r].concat(N()(t))),o=(0,x.pickBy)(this.state,function(f,l){return l.startsWith(u)});return(0,x.isEmpty)(o)?void 0:o}}},{key:"emit",value:function(e){var t=a.join([e.type].concat(N()(e.names)));this.setState(e);var r=ce()(this.subscribers),u;try{for(r.s();!(u=r.n()).done;){var o=u.value;(o.fuzzy&&t.startsWith(o.key)||o.uniqueKey&&new RegExp("^".concat(a.join([(0,x.escapeRegExp)(o.key),"\\d+",(0,x.escapeRegExp)(a.join(o.uniqueKey))]),"$")).test(t)||t===o.key)&&o.callback(e)}}catch(f){r.e(f)}finally{r.f()}}},{key:"on",value:function(e,t){var r=this,u=a.join([t.type].concat(N()(t.names))),o=y()(y()({},t),{},{key:u,callback:e});return this.subscribers.push(o),function(){var f=r.subscribers.indexOf(o);f>-1&&r.subscribers.splice(f,1)}}}],[{key:"join",value:function(e){return e.join(a.keySplit)}},{key:"updateState",value:function(e,t){var r=a.join([t.type].concat(N()(t.names)));return t.remove?delete e[r]:e[r]=t,e}}]),a}();R()($,"keySplit","_DIFF_FORM_STORE_KEY_SPLIT_");var D=function(){return(0,i.useContext)(W)},G=function(){var n=D(),e=n.type;return e===I.SOURCE?I.TARGET:I.SOURCE},Fe=function(n){var e=(0,i.useRef)(n);return e.current=n,(0,i.useCallback)(function(){return e.current.apply(e,arguments)},[])},De=function(n){var e=(0,i.useRef)(),t=(0,i.useRef)(n);return t.current!==n&&(e.current=t.current,t.current=n),e.current},B=function(n,e){var t=(0,i.useRef)(),r=De(e);return(typeof e=="undefined"||!(0,x.isEqual)(r,e))&&(t.current=n()),t.current},H=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=e[0],u=e.slice(1),o=Fe(r);return B(function(){return x.debounce.apply(void 0,[o].concat(N()(u)))},[u])},pe=c(5574),q=c.n(pe),k=function(){var n=D(),e=n.statusInfo,t=n.firstStatus,r=(0,i.useState)(!1),u=q()(r,2),o=u[0],f=u[1];(0,i.useEffect)(function(){var v=setTimeout(function(){return f(!0)},350);return function(){return clearTimeout(v)}},[]);var l=(0,i.useMemo)(function(){return t?e:void 0},[t,e]);return o?l:void 0},Ce=c(21532),U=function(){return(0,i.useContext)(Y)},Se=function(){var n,e,t=(0,i.useContext)(Ce.ZP.ConfigContext),r=U(),u=(n=(e=t.locale)===null||e===void 0?void 0:e.locale)!==null&&n!==void 0?n:"en";return(0,i.useCallback)(function(o){var f,l,v=r==null?void 0:r.locale,h=(f=w[u])!==null&&f!==void 0?f:w.en,m=Object.assign({},h,v);return(l=m[o])!==null&&l!==void 0?l:o},[u,r==null?void 0:r.locale])},_=function(){var n=Se(),e=U();return(0,i.useCallback)(function(t){if(t){var r,u;return{code:t,text:n(t),color:(r=e==null||(u=e.color)===null||u===void 0?void 0:u[t])!==null&&r!==void 0?r:le[t]}}},[e==null?void 0:e.color,n])},L=function(){return(0,i.useContext)(z)},Z=function(n){return B(function(){if(typeof n!="undefined")return Array.isArray(n)?n.length?n:void 0:[n]},[n])},T=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return B(function(){if(!e.some(function(u){return typeof u=="undefined"})){var r=x.concat.apply(void 0,e);return r.length?r:void 0}},[e])},ge=function(n){var e=Z(n),t=D(),r=t.fullNamePath;return T(r,e)},ee=function(n){var e=Z(n),t=D(),r=t.anotherFieldName,u=t.uniqueKey;return(0,i.useMemo)(function(){return u&&typeof r=="number"&&typeof(e==null?void 0:e[0])=="number"?[r].concat(N()(e.slice(1))):e},[r,e,u])},J=function(n,e){var t=D(),r=t.store,u=(0,i.useState)(function(){return r==null?void 0:r.getSnapshot({type:n,names:e})}),o=q()(u,2),f=o[0],l=o[1],v=(0,i.useRef)(f),h=H(function(){l(v.current)},300);return(0,i.useEffect)(function(){if(e&&n&&r){v.current=r.getSnapshot({type:n,names:e}),h(),h.flush();var m=r.on(function(d){var F=v.current;v.current=d.remove?void 0:d,h(),F!==v.current&&((0,x.isUndefined)(F)||(0,x.isUndefined)(v.current))&&h.flush()},{names:e,type:n});return function(){m(),h.cancel()}}},[n,e,r,h]),f},tn=function(n){var e=useDiffFormContext(),t=e.type,r=useNextNames(n);return J(t,r)},Pe=function(n){var e=D(),t=e.anotherFullNamePath,r=G(),u=ee(n),o=T(t,u);return J(r,o)},Ie=function(n){var e=D(),t=e.type,r=e.fullNamePath,u=e.uniqueKey,o=T(r,n,u);return J(t,o)},je=function(){var n=D(),e=n.store,t=n.anotherFullNamePath,r=n.uniqueKey,u=G(),o=(0,i.useState)(function(){return e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r})}),f=q()(o,2),l=f[0],v=f[1],h=(0,i.useRef)(l),m=H(function(){v(h.current)},300);return(0,i.useEffect)(function(){if(t&&u&&e&&r){h.current=e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),m(),m.flush();var d=e.on(function(F){var j=h.current;h.current=j?$.updateState(y()({},j),F):e==null?void 0:e.getUniqueFieldsSnapshots({names:t,type:u,uniqueKey:r}),m(),(0,x.values)(j).length!==(0,x.values)(h.current).length&&m.flush()},{names:t,type:u,uniqueKey:r});return function(){d(),m.cancel()}}},[t,m,e,u,r]),l},Ee=function(n){var e=D(),t=e.store,r=e.anotherFullNamePath,u=T(r,n),o=G(),f=(0,i.useRef)((0,i.useMemo)(function(){return t==null?void 0:t.getChildSnapshots({names:u,type:o})},[])),l=(0,i.useState)(!(0,x.isEmpty)(f.current)),v=q()(l,2),h=v[0],m=v[1],d=H(function(){m(!!f.current)},300);return(0,i.useEffect)(function(){if(u&&o&&t){f.current=t.getChildSnapshots({type:o,names:u}),d(),d.flush();var F=t.on(function(j){var C=f.current;f.current=C?$.updateState(y()({},C),j):t==null?void 0:t.getChildSnapshots({names:u,type:o}),d(),(0,x.values)(C).length!==(0,x.values)(f.current).length&&d.flush()},{names:u,type:o,fuzzy:!0});return function(){F(),d.cancel()}}},[o,u,t,d]),h},Ne=function(n){var e=D(),t=e.uniqueKey,r=e.anotherFullNamePath,u=je(),o=Ie(n),f=Ee(n);return(0,i.useMemo)(function(){if(t&&u&&o&&r){var l;return(l=(0,x.values)(u).find(function(v){return(0,x.isEqual)(v.value,o.value)}))===null||l===void 0?void 0:l.names[r.length]}return f?n:void 0},[t,u,o,r,f,n])},Me=c(68400),Re=c.n(Me),Ae=c(35480),Oe=c(93967),be=c.n(Oe),ne,Te=Ae.ZP.div(ne||(ne=Re()([`
  &.diff-form-mark{
    padding: 8px;
    border-style: dashed;
    border-top: none;
    border-left-width: 1px;
    border-bottom-width: 1px;
    border-right-width: 1px;
    border-color: `,`;
    position: relative;

    .diff-form-mark-divider{
      position: absolute;
      bottom: 100%;
      width: 100%;
      left: 0;
      transform: translate(0, 50%);
      display: flex;
      align-items: center;

      & > span{
        font-size: 12px;
        color: `,`;

        &:first-child{
          flex: 0 0 25%;
        }

        &:last-child {
          flex: 1;
        }

        &:first-child, &:last-child{
          border-top-width: 1px;
          border-top-style: dashed;
          border-color: `,`;
        }
      }
    }
  }
`])),function(a){var n;return(n=a.$status)===null||n===void 0?void 0:n.color},function(a){var n;return(n=a.$status)===null||n===void 0?void 0:n.color},function(a){var n;return(n=a.$status)===null||n===void 0?void 0:n.color}),te=function(n){var e=n.className,t=n.style,r=n.children,u=k();return(0,s.jsxs)(Te,{className:be()(e,{"diff-form-mark":u}),style:t,$status:u,children:[u?(0,s.jsxs)("div",{className:"diff-form-mark-divider",children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{children:u==null?void 0:u.text}),(0,s.jsx)("span",{})]}):null,r]})},Ke=["children","name","noStatus"],Ue=["children","noStatus"],re=i.createContext(null),Le=function(){return i.useContext(re)},Ze=function(n){var e=n.children,t=n.name,r=n.noStatus,u=M()(n,Ke),o=D(),f=o.type,l=o.store,v=o.statusInfo,h=o.firstStatus,m=U(),d=Pe(t),F=_(),j=Z(t),C=ge(t),A=(0,i.useRef)(l);A.current=l;var V=(0,i.useMemo)(function(){if(f){var p=u.value,K=d==null?void 0:d.value,en=function(){if(O(p)&&!O(K))return f===I.SOURCE?g.EMPTY:g.REMOVE;if(!O(p)&&O(K))return f===I.SOURCE?g.REMOVE:g.ADD;if(!O(p)&&!O(K)&&!(0,x.isEqual)(p,K))return g.MODIFY}();return F(en)}},[d==null?void 0:d.value,u.value,f,F]),we=(0,i.useMemo)(function(){return{statusInfo:V!=null?V:v,firstStatus:!h&&!v&&!!V}},[h,V,v]),_e=(0,i.useMemo)(function(){var p;return(p=m==null?void 0:m.wrapper)!==null&&p!==void 0?p:te},[m==null?void 0:m.wrapper]);return(0,i.useEffect)(function(){if(C&&f){var p,K=u.value;(p=A.current)===null||p===void 0||p.emit({type:f,names:C,value:K})}},[u.value,C,f]),(0,i.useEffect)(function(){if(f&&C)return function(){var p;return(p=A.current)===null||p===void 0?void 0:p.emit({type:f,names:C,remove:!0})}},[C,f]),(0,s.jsx)(b,{value:we,children:(0,s.jsx)(re.Provider,{value:{name:j,fullName:C,value:u.value,anotherValue:v||d==null?void 0:d.value},children:r?(0,i.cloneElement)(e,u):(0,s.jsx)(_e,{children:(0,i.cloneElement)(e,u)})})})},Q=function(n){var e=n.children,t=n.noStatus,r=M()(n,Ue),u=D(),o=Z(n.name);return typeof u.type!="undefined"&&o&&(0,i.isValidElement)(e)?(0,s.jsx)(S.Z.Item,y()(y()({},r),{},{children:(0,s.jsx)(Ze,{name:r.name,noStatus:r.noStyle||t,children:e})})):(0,s.jsx)(S.Z.Item,y()(y()({},r),{},{children:e}))};Q.useStatus=S.Z.Item.useStatus,Q.useDiffValue=Le;var Ve=["uniqueKey"],Ye=["uniqueKey"],$e=function(n){var e=n.uniqueKey,t=M()(n,Ve),r=D(),u=r.anotherFullNamePath,o=L(),f=o.namePaths,l=ee(t.name),v=T(u,l),h=Z(e),m=(0,i.useMemo)(function(){return{fullNamePath:f,anotherFullNamePath:v,uniqueKey:h}},[f,v,h]);return(0,s.jsx)(b,{value:m,children:(0,s.jsx)(S.Z.List,y()({},t))})},qe=function(n){var e=n.uniqueKey,t=M()(n,Ye),r=D(),u=L(),o=u.namePaths,f=T(o,n.name),l=(0,i.useMemo)(function(){return{namePaths:f}},[f]);return typeof r.type!="undefined"?(0,s.jsx)(E,{value:l,children:(0,s.jsx)($e,y()(y()({},t),{},{uniqueKey:e}))}):(0,s.jsx)(E,{value:l,children:(0,s.jsx)(S.Z.List,y()({},t))})},We=function(n){var e=n.children,t=n.noStatus,r=L(),u=r.fieldName,o=Ne(u),f=D(),l=f.statusInfo,v=f.type,h=f.firstStatus,m=_(),d=U(),F=(0,i.useMemo)(function(){if(l)return l;if(typeof o!="number")return v===I.SOURCE?m(g.REMOVE):m(g.ADD)},[o,l,v,m]),j=(0,i.useMemo)(function(){return{fieldName:u,anotherFieldName:o,statusInfo:F,firstStatus:!h&&!l&&!!F}},[u,h,o,F,l]),C=(0,i.useMemo)(function(){var A;return(A=d==null?void 0:d.wrapper)!==null&&A!==void 0?A:te},[d==null?void 0:d.wrapper]);return(0,s.jsx)(b,{value:j,children:t?e:(0,s.jsx)(C,{children:e})})},ze=function(n){var e=D(),t=(0,i.useMemo)(function(){return{fieldName:n.fieldName}},[n.fieldName]);return typeof e.type!="undefined"?(0,s.jsx)(E,{value:t,children:(0,s.jsx)(We,y()({},n))}):(0,s.jsx)(E,{value:t,children:n.children})},Ge=function(n){var e=n.children,t=L();return e(t)},Be=c(71230),ue=c(15746),He=function(n){var e=n.source,t=n.target;return(0,s.jsxs)(Be.Z,{gutter:[8,8],children:[(0,s.jsx)(ue.Z,{span:24,lg:12,children:e}),(0,s.jsx)(ue.Z,{span:24,lg:12,children:t})]})},ke=function(n){var e=n.children,t=k();return e(t)},Je=["diff"],P=function(n){var e=n.diff,t=M()(n,Je),r=U(),u=(0,i.useMemo)(function(){var F={layout:t.layout,component:t.component,name:"source"};if(e===!0)return F;if(e)return y()(y()({},F),e)},[e,t.layout,t.component]),o=(0,i.useMemo)(function(){return y()({name:u?"target":void 0},t)},[t,u]),f=(0,i.useMemo)(function(){return{store:new $,fullNamePath:[],anotherFullNamePath:[]}},[]),l=(0,i.useMemo)(function(){return{type:I.SOURCE}},[]),v=(0,i.useMemo)(function(){return{type:I.TARGET}},[]),h=(0,i.useMemo)(function(){return{type:l.type,name:u==null?void 0:u.name,disabled:u==null?void 0:u.disabled,namePaths:[]}},[u==null?void 0:u.disabled,u==null?void 0:u.name,l.type]),m=(0,i.useMemo)(function(){return{type:v.type,name:o==null?void 0:o.name,disabled:o==null?void 0:o.disabled,namePaths:[]}},[o==null?void 0:o.disabled,o==null?void 0:o.name,v.type]),d=(0,i.useMemo)(function(){var F;return(F=r==null?void 0:r.component)!==null&&F!==void 0?F:He},[r==null?void 0:r.component]);return u?(0,s.jsx)(b,{value:f,children:(0,s.jsx)(E,{value:{diffEnable:!0},children:(0,s.jsx)(d,{source:(0,s.jsx)(E,{value:h,children:(0,s.jsx)(b,{value:l,children:(0,s.jsx)(S.Z,y()(y()({},u),{},{children:o.children}))})}),target:(0,s.jsx)(E,{value:m,children:(0,s.jsx)(b,{value:v,children:(0,s.jsx)(S.Z,y()({},o))})})})})}):(0,s.jsx)(E,{value:m,children:(0,s.jsx)(S.Z,y()({},o))})};P.Item=Q,P.List=qe,P.ListItem=ze,P.ErrorList=S.Z.ErrorList,P.Info=Ge,P.DiffStatus=ke,P.useForm=S.Z.useForm,P.useFormInstance=S.Z.useFormInstance,P.useWatch=S.Z.useWatch,P.useDiffFormInfo=L,P.useDiffFormStatus=k;var Qe=["children"],Xe=function(n){var e=n.children,t=M()(n,Qe);return e(t)}}}]);
